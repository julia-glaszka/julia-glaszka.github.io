{"hash":"d7854f84d1ae0307c2d5336bcf545aa865f01b3e","data":{"posts":{"totalCount":12,"pageInfo":{"totalPages":2,"currentPage":1},"edges":[{"node":{"id":"5c6912511fbf00580160f309c8bff279","title":"Obiektywizm a rozwÃ³j w IT","timeToRead":13,"datetime":"2021-12-31 18:37:24","content":"<p>Jednym z waÅ¼nych celÃ³w w Å¼yciu czÅ‚owieka jest <strong>satysfakcja z efektÃ³w produktywnej pracy</strong> - zaplanowanej i zorganizowanej przez racjonalny umysÅ‚. KreatywnoÅ›Ä‡ i uzyskiwanie korzystnych rezultatÃ³w z podjÄ™tych przedsiÄ™wziÄ™Ä‡ umoÅ¼liwia czÅ‚owiekowi przeÅ¼ycie w Å›wiecie peÅ‚nym zmian, niedoborÃ³w zasobÃ³w i niebezpieczeÅ„stw. <strong>Inteligentne planowanie</strong> pozwala na unikanie cierpienia i radzenie sobie z spotykanymi trudnoÅ›ciami. EsencjÄ… zadowolenia z wÅ‚asnej pracy jest wÅ‚aÅ›nie <strong>poczucie skutecznoÅ›ci i przydatnoÅ›ci</strong>. </p>\n<p>Proces tworzenia w gÅ‚Ã³wnej mierze jest uzaleÅ¼niony od przyjÄ™tej filozofii i zaangaÅ¼owania danej osoby - czÅ‚owiek zmotywowany z pozytywnÄ… wizjÄ… Å›wiata osiÄ…gnie zdecydowanie lepsze efekty niÅ¼ osoba bez poczucia sensu, wiary w siebie i postrzegajÄ…ca Å›wiat jako za trudny do zrozumienia chaos. JednÄ… z filozofii, ktÃ³re mogÄ… pomÃ³c wytyczyÄ‡ Å›cieÅ¼kÄ™ podejÅ›cia do Å¼ycia i pracy, moÅ¼e byÄ‡ <em>obiektywizm</em> - czyli tak zwana <strong>filozofia Å¼ycia na ziemii</strong>.</p>\n<p>Ten post bÄ™dzie trochÄ™ mniej techniczny, wrÄ™cz zero-techniczny - choÄ‡ jako caÅ‚oÅ›Ä‡ moÅ¼e trochÄ™ zmieniÄ‡ podejÅ›cie do mniej miÄ™kkich spraw. MyÅ›lÄ™, Å¼e moÅ¼e pozwoliÄ‡ zauwaÅ¼yÄ‡, Å¼e u ÅºrÃ³dÅ‚a spraw czysto technicznych czÄ™sto leÅ¼y podÅ‚oÅ¼e ludzkie, miÄ™kkie - bo to my, inÅ¼ynierzy, tworzymy technologiÄ™. </p>\n<p>Postaram siÄ™ przybliÅ¼yÄ‡, czym jest obiektywizm, jakie cechy promuje i jak mogÄ… siÄ™ przydaÄ‡ one w pracy w IT. ZwrÃ³cÄ™ teÅ¼ uwagÄ™ na puÅ‚apki myÅ›lenia, w ktÃ³re moÅ¼na wpaÅ›Ä‡, zbyt mocno przywiÄ…zujÄ…c siÄ™ do dosÅ‚ownego znaczenia wzorcÃ³w osobowych w powieÅ›ciach Ayn Rand - twÃ³rczyni tej filozofii.</p>\n<p>Na wstÄ™pie chciaÅ‚abym zaznaczyÄ‡, Å¼e nie posiadam zaawansowanej wiedzy naukowej na temat filozofii ani psychologii, podejmujÄ™ temat jako <strong>laik na podstawie wÅ‚asnych przemyÅ›leÅ„ i doÅ›wiadczeÅ„</strong>. OsobiÅ›cie sama lubiÄ™ analizowaÄ‡ w jaki sposÃ³b dziaÅ‚ajÄ… ludzie - w jakie wzorce myÅ›lowe wpadli lub jakie archetypy mogli przyjÄ…Ä‡. MyÅ›lÄ™, Å¼e pomimo mojej amatorskiej analizy, nikogo nie zniechÄ™cÄ™ do tematu, ktÃ³ry moÅ¼e byÄ‡ ciekawy. Z gÃ³ry zachÄ™cam do pogÅ‚Ä™biania wiedzy na ten temat.</p>\n<h3 id=\"skÄ…d-pomysÅ‚-na-post\">SkÄ…d pomysÅ‚ na post?</h3>\n<p>SÄ… w Å¼yciu <em>tacy</em> pisarze, ktÃ³rych siÄ™ nie zapomina. Pod koniec czytania ksiÄ…Å¼ki wywoÅ‚ujÄ… ten moment, gdy nabiera siÄ™ gÅ‚Ä™bszy oddech i jedynie co pojawia siÄ™ w gÅ‚owie to uczucie podziwu, szacunku, zrozumienia. Przez nastÄ™pne dni pozostaje myÅ›lenie o tym, co siÄ™ przeczytaÅ‚o, w gÅ‚owie nawracajÄ… dogÅ‚Ä™bne analizy w losowych sytuacjach i dochodzenie do coraz gÅ‚Ä™bszych przemyÅ›leÅ„. </p>\n<p>Pojawia siÄ™ <em>nowy wymiar</em>, na ktÃ³ry wczeÅ›niej nie zwracaÅ‚o siÄ™ uwagi, a sprawiajÄ…cy, Å¼e w Å¼yciu dostrzega siÄ™ wiÄ™cej. Tak wÅ‚aÅ›nie miaÅ‚am po <em>Atlasie Zbuntowanym</em> i pÃ³Åºniej <em>Cnocie Egoizmu</em>. Te dwie ksiÄ…Å¼ki i caÅ‚a wyÅ‚oÅ¼ona w nich wykÅ‚adnia <em>obiektywizmu i racjonalnego egoizmu</em> zmieniÅ‚y moje Å¼ycie na lepsze. PoukÅ‚adaÅ‚y wiele spraw, ktÃ³re wczeÅ›niej nie byÅ‚y dla mnie intuicyjne czy jednoznaczne, szczegÃ³lnie w kwestii <strong>planowania, wartoÅ›ciowania i dokonywania wyborÃ³w</strong>. PoczuÅ‚am teÅ¼ wieloletni, gÅ‚Ä™boki przypÅ‚yw <strong>inspiracji i motywacji do poznawania Å›wiata i czynienia go lepszym</strong>. MoÅ¼na powiedzieÄ‡, Å¼e obiektywizm przetarÅ‚ mi szlaki na <em>przyszÅ‚oÅ›Ä‡</em>, zrozumiaÅ‚am czym dla mnie jest <em>sens Å¼ycia</em> i finalnie umiem sprecyzowaÄ‡, <em>do czego dÄ…Å¼Ä™</em>. </p>\n<p>DziÄ™ki wejÅ›ciu w gÅ‚Ä™biÄ™ obiektywizmu, moje Å¼ycie zaczÄ™Å‚o dziaÅ‚aÄ‡ jak na <em>autopilocie</em>. CzÄ™sto naturalnie wartoÅ›ciujÄ™ sprawy i rzadko mam rÃ³Å¼nego rodzaju <em>dysonanse</em>. Filozofia Rand pozwoliÅ‚a mi zrozumieÄ‡, Å¼e w hierarchii poznawczej <strong>rozum</strong> zawsze powinien staÄ‡ <strong>powyÅ¼ej emocjami</strong>. </p>\n<blockquote>\n<p>â€œJeÅ›li czÄ™Å›Ä‡ pani niepewnoÅ›ci stanowi konflikt pomiÄ™dzy sercem a umysÅ‚em, proszÄ™ siÄ™ kierowaÄ‡ umysÅ‚em.â€ <span> John Galt, \"Atlas Zbuntowany\" Ayn Rand </span></p>\n</blockquote>\n<p>Nie chodzi natomiast o caÅ‚kowitÄ… negacjÄ™ emocji, tylko <strong>podporzÄ…dkowanie</strong> ich rozumowi. Wiele emocji jest integralnych z rozumem i tym, kim jesteÅ›my. Niekiedy po prostu pojawia siÄ™ nieoczekiwany <strong>szum emocjonalny</strong>, ktÃ³rego genezÄ™ trzeba zrozumieÄ‡ i wykryÄ‡.</p>\n<p>Zrozumienie dlaczego mÃ³zg reaguje na dane zdarzenie w konkretny sposÃ³b. Poznanie ÅºrÃ³dÅ‚a tych emocji - skÄ…d siÄ™ wywodzÄ…, jakie majÄ… podÅ‚oÅ¼e. UÅ‚atwia to pracÄ™, wspÃ³Å‚pracÄ™ i zrozumienie innych osÃ³b, rozwijanie siebie i podejmowanie trudnych decyzji. </p>\n<p><img src=\"/images/posts/obiektywizm/ayn-rand.jpg\"></p>\n<div align=\"center\"> Ayn Rand </div>\n<h3 id=\"parÄ™-sÅ‚Ã³w-o-ayn-rand\">ParÄ™ sÅ‚Ã³w o Ayn Rand</h3>\n<p>TwÃ³rczyniÄ… wymienionych wyÅ¼ej dwÃ³ch ksiÄ…Å¼ek byÅ‚a (tak, to kobieta) <strong>Ayn Rand</strong>, znakomita rosyjska pisarka i filozof. Okres jej twÃ³rczoÅ›ci i aktywnoÅ›ci w mediach przypadaÅ‚ na XX wiek, dokÅ‚adniej od 1932 do jej Å›mierci w 1982. </p>\n<p>W mÅ‚odoÅ›ci interesowaÅ‚a siÄ™ filozofiÄ…, w szczegÃ³lnosci inspirowaÅ‚a jÄ… <em>filozofia arystotelejska</em>, ktÃ³rej elementy moÅ¼na dostrzec w jej dalszej twÃ³rczoÅ›ci. Okres dorastania autorki przypadÅ‚ na czasy <strong>rewolucji komunistycznej</strong>. Sama jej rodzina rÃ³wnieÅ¼ padÅ‚a ofiarÄ… rewolucjonistÃ³w - ich dorobek Å¼ycia zostaÅ‚ skonfiskowany przez bolszewikÃ³w. Te <strong>straszne doÅ›wiadczenia</strong> pozwoliÅ‚y jej dostrzec, jak Ã³wczesny ustrÃ³j krzywdziÅ‚ i niszczyÅ‚ Å¼ycia ludnoÅ›ci Rosji. Zdecydowanie wpÅ‚ynÄ™Å‚o to na jej <em>awersjÄ™</em> do kolektywizmu.</p>\n<p>Po emigracji do USA jej kariera rozkwitÅ‚a i mogÅ‚a skupiÄ‡ siÄ™ na swobodnym pisaniu. W jej dorobku sÄ… gÅ‚Ã³wnie powieÅ›ci, ale rÃ³wnieÅ¼ zajmowaÅ‚a siÄ™ pisaniem scenariuszy i esejÃ³w. Pomimo rozlegÅ‚ej wiedzy na temat filozofii, nie potrafiÅ‚a siÄ™ z Å¼adnÄ… w peÅ‚ni utoÅ¼samiÄ‡, dlatego zaczÄ™Å‚a tworzyÄ‡ <strong>swÃ³j wÅ‚asny system filozoficzno-moralny</strong>, czyli obiektywizm. DuÅ¼Ä… inspiracjÄ… byÅ‚ teÅ¼ jej mÄ…Å¼, Frank O'Connor, ktÃ³ry wpasowywaÅ‚ siÄ™ w jej etos moralny i jak sama twierdziÅ‚a, mÃ³gÅ‚ byÄ‡ inspiracjÄ… dla niektÃ³rych postaci jej powieÅ›ci: </p>\n<blockquote>\n<p>â€œEvery hero was modeled after him,â€ Miss Rand said. â€œI sometimes took an entire monologue from him and slipped it into my book. When 1 couldn't think of a title for one of my novels, he did. He told the whole story in two words.â€ Mr. D'Connor's twoâ€word title was â€œAtlas Shrugged.â€ <span>Ayn Rand, NY. Times, â€œCharles Francis O'Connor, Artist, Husband of the Writer Ayn Randâ€, 1979</span> </p>\n</blockquote>\n<h3 id=\"czym-jest-obiektywizm\">Czym jest obiektywizm?</h3>\n<p>Jest to <strong>system filozoficzny</strong>, oparty na <strong>indywidualizmie</strong>, <strong>racjonalnym egoizmie</strong> oraz <strong>wolnoÅ›ci jednostki</strong>. WedÅ‚ug Rand, Å›wiat jako aktualna rzeczywistoÅ›Ä‡, jest niezaleÅ¼ny od Å›wiadomoÅ›ci, poglÄ…dÃ³w i emocji czÅ‚owieka. Prawda jest jedyna i absolutna, <em>â€œdwa plus dwa rÃ³wna siÄ™ cztery.â€œ</em>. <strong>RÃ³Å¼nice percepcyjne</strong> nie zmieniajÄ… istoty rzeczy. Dany materiaÅ‚ w danym momencie zawsze jest tym samym materiaÅ‚em, niezaleÅ¼nie od poglÄ…dÃ³w obserwatora. CzÅ‚owiek moÅ¼e wydawaÄ‡ jedynie racjonalne osÄ…dy, w oparciu o prawa natury, wiedzÄ™ i naukÄ™, a tym samym dÄ…Å¼yÄ‡ do prawdy.</p>\n<p>SamÄ… wiedzÄ™ czÅ‚owiek powinien pozyskiwaÄ‡ zarÃ³wno przez <strong>empiryzm</strong>, jak i <strong>racjonalizm</strong> - <em>nie muszÄ…</em> one miÄ™dzy sobÄ… <em>kolidowaÄ‡</em>. ZdobywajÄ…c doÅ›wiadczenie empiryczne moÅ¼na dojÅ›Ä‡ do nowych racjonalnych wnioskÃ³w i odkryÄ‡.</p>\n<p>ChoÄ‡ ten system z pozoru brzmi bardzo chÅ‚odno, nie unika on <strong>kwestii emocji i potrzeb czÅ‚owieka</strong>. Trzeba jednak przyznaÄ‡, Å¼e ma trochÄ™ inne podejÅ›cie niÅ¼ filozofie emocjonalno-centryczne, w ktÃ³rych emocje determinujÄ… kodeks etyczny. W obiektywizmie etyka jest pochodnÄ… <strong>praw naturalnych czÅ‚owieka</strong>, a jego celem jest <strong>osobiste szczÄ™Å›cie</strong>.</p>\n<p>DrogÄ… do tego stanu jest zaspokojenie <strong>racjonalnych potrzeb</strong> - od tych <em>najniÅ¼szych</em> (fizycznych, takich jak sprawy przeÅ¼ycia), do tych <em>wyÅ¼szych</em> - romantyczna miÅ‚oÅ›Ä‡, realizacja w pracy i pasjach, zachwyt nad sztukÄ…. </p>\n<p>NaleÅ¼y zaznaczyÄ‡, Å¼e samo dÄ…Å¼enie do szczÄ™Å›cia nie moÅ¼e byÄ‡ irracjonalnymi zachciankami, nie moÅ¼e teÅ¼ <strong>nikogo krzywdziÄ‡ ani odbieraÄ‡ mu wolnoÅ›ci</strong>. </p>\n<h3 id=\"philosophy-for-living-on-earth\">Philosophy for Living on Earth</h3>\n<p>Teraz juÅ¼ moÅ¼na zrozumieÄ‡, dlatego obiektywizm uzyskaÅ‚ okreÅ›lenie <em>filozofii Å¼ycia na ziemii</em>. Wynika to z silnego ugruntowania Å¼ycia czÅ‚owieka do Å¼ycia doczesnego. <em>Å»ycia dla teraÅºniejszoÅ›ci i przyszÅ‚oÅ›ci, na Å›wiecie jaki jest i bÄ™dzie.</em> I tak, tutaj nastaje najbardziej gÅ‚Ã³wny temat tego artykuÅ‚u czyli - <em>czego moÅ¼na siÄ™ nauczyÄ‡ z filozofii obiektywistycznej? Na jakie sfery Å¼ycia moÅ¼e wpÅ‚ynÄ…Ä‡?</em></p>\n<h3 id=\"satysfakcja-z-pracy-i-wyznaczona-wizja-na-przyszÅ‚oÅ›Ä‡\">Satysfakcja z pracy i wyznaczona wizja na przyszÅ‚oÅ›Ä‡</h3>\n<p>Obiektywizm przykÅ‚ada duÅ¼Ä… wagÄ™ do kwestii <strong>pracy</strong>, jako jednego z <strong>celÃ³w</strong> w Å¼yciu. Praca jest szczegÃ³lnym sposobem dÄ…Å¼enia do <strong>szczÄ™Å›cia</strong>, poniewaÅ¼ widok jej efektÃ³w powoduje <strong>poczucie dumy, skutecznoÅ›ci i przydatnoÅ›ci</strong>. W niektÃ³rych przypadkach moÅ¼e wpÅ‚ynÄ…Ä‡ na rozwÃ³j nauki i przyszÅ‚ych pokoleÅ„, co wzmaga to poczucie. Osoby, z ktÃ³rymi wspÃ³Å‚pracuje siÄ™ nad dzieÅ‚em w imiÄ™ wspÃ³lnego celu, to teÅ¼ czÄ™sto pasjonaci. Takie otoczenie <strong>synergicznie</strong> dostarcza wiÄ™kszej motywacji, ciekawych rozmÃ³w i miÅ‚ych wspomnieÅ„.</p>\n<p><img src=\"/images/posts/obiektywizm/building.jpg\"></p>\n<blockquote>\n<p>NajwiÄ™ksze znaczenie ma tutaj praca, w niej bowiem ksztaÅ‚tuje siÄ™ fundamentalne\npoczucie kontroli nad egzystencjÄ… â€” poczucie skutecznoÅ›ci â€” ktÃ³re umoÅ¼liwia\ndopiero radoÅ›Ä‡ z innych wartoÅ›ci. CzÅ‚owiek, ktÃ³rego Å¼yciu brak ukierunkowania czy\nzadania, czÅ‚owiek, ktÃ³remu brak twÃ³rczego celu, z koniecznoÅ›ci czuje siÄ™ bezradny i\nbezsilny, a wiÄ™c i niezdolny do ksztaÅ‚towania Å¼ycia. Niepodobna zaÅ›, by taki\nczÅ‚owiek cieszyÅ‚ siÄ™ Å¼yciem. <span> Nathaniel Branden, Cnota Egoizmu </span></p>\n</blockquote>\n<p>Koncept <strong>Piramidy Maslowa</strong> gÅ‚osi, Å¼e potrzeby czÅ‚owieka sÄ… nieskoÅ„czone i kiedy jedna zostaje zaspokojona, to pojawia siÄ™ nastÄ™pna. Tworzy to rytm Å¼ycia, naturalnÄ… siÅ‚Ä™, ktÃ³ra napÄ™dza czÅ‚owieka i nie pozwala na stagnacjÄ™. DziÄ™ki temu osoba moÅ¼e pokochaÄ‡ swoje Å¼ycie, co w poÅ‚Ä…czeniu z szacunkiem do siebie i innych ludzi powoduje poczucie peÅ‚nej satysfakcji z niego.</p>\n<blockquote>\n<p>JednÄ… z oznak szacunku, jaki Å¼ywi do siebie czÅ‚owiek, ktÃ³ry uwaÅ¼a Å›wiat za otwarty\ndla jego wysiÅ‚kÃ³w, jest gÅ‚Ä™boka przyjemnoÅ›Ä‡ z twÃ³rczej pracy umysÅ‚u. RadoÅ›Ä‡ Å¼ycia\njest nieustannie wspomagana przez nieustajÄ…cy zapaÅ‚ do rozszerzania wiedzy i\numiejÄ™tnoÅ›ci, zapaÅ‚ do myÅ›lenia, stawiania przed sobÄ… nowych zadaÅ„, zmagania siÄ™\nz przeszkodami i pokonywania ich. W ten sposÃ³b rodzi siÄ™ duma ze stale\nwzrastajÄ…cej skutecznoÅ›ci. <span> Nathaniel Branden, Cnota Egoizmu </span></p>\n</blockquote>\n<p><strong>Åšrodowisko w pracy w IT</strong> ma szczegÃ³lnie <strong>duÅ¼o nowych wyzwaÅ„</strong>. CzÄ™sto pojawiajÄ… siÄ™ nowe problemy, z ktÃ³rymi trzeba sobie radziÄ‡ i <em>planowaÄ‡ rozwiÄ…zania</em>. Codziennie spotykamy <em>nowoczesne technologie</em>, ktÃ³re fascynujÄ… i mogÄ… zmieniÄ‡ Å›wiat branÅ¼y technologicznej na lepsze. To Å›wietna dziedzina dla osÃ³b, ktÃ³re <strong>kochajÄ… siÄ™ rozwijaÄ‡ i czujÄ… z tego duÅ¼Ä… satysfakcjÄ™</strong>. </p>\n<h3 id=\"epistemologia---poszukiwanie-przyczyn\">Epistemologia - poszukiwanie przyczyn</h3>\n<p>KrÃ³tka definicja <em>epistemologii</em> (z wikipedii ğŸ’– ):</p>\n<blockquote>\n<p>â€œDziaÅ‚ filozofii, zajmujÄ…cy siÄ™ relacjami miÄ™dzy poznawaniem, poznaniem a rzeczywistoÅ›ciÄ…. Epistemologia rozwaÅ¼a naturÄ™ takich pojÄ™Ä‡ jak: prawda, przekonanie, sÄ…d, spostrzeganie, wiedza czy uzasadnienie. \"</p>\n</blockquote>\n<p>WedÅ‚ug <strong>racjonalnej epistemologii</strong>, centralnym <strong>narzÄ™dziem poznania</strong> czÅ‚owieka jest <strong>rozum</strong>, a Å›wiat jest <strong>obiektywny</strong> - niezmienny od percepcji. Z tego powodu pytanie <em>â€œdlaczego?â€</em> powinno byÄ‡ stawiane za kaÅ¼dym razem, gdy jest potrzeba poznania <em>sedna</em> wszystkich problemÃ³w i dojÅ›cia do <em>prawdy absolutnej</em>.</p>\n<p>CaÅ‚a technologia skÅ‚ada siÄ™ z fizyki, matematyki i logiki, a te nauki sÄ… obliczalne, mierzalne, deterministyczne (mam na myÅ›li nauki w wariancie klasycznym). KaÅ¼dy ukÅ‚ad jest zaprogramowany z gÃ³ry, na podstawie <em>danych wejÅ›ciowych</em> i konkretnego <em>stanu</em>, moÅ¼na przewidzieÄ‡ z duÅ¼ym prawdopodobieÅ„stwem, jaki bÄ™dzie <em>wynik koÅ„cowy</em>. </p>\n<p>Kluczowym momentem w Å¼yciu inÅ¼yniera jest nabycie Å›wiadomoÅ›ci, Å¼e caÅ‚y system informatyczny to tylko <strong>wielka mapa</strong>, a nie <em>â€œczarna skrzynkaâ€</em>. KaÅ¼de zdarzenie da siÄ™ <em>zreprodukowaÄ‡</em> - do tego potrzebna jest umiejÄ™tnoÅ›Ä‡ szukania wiedzy i debugowania. Bardzo waÅ¼ne sÄ… teÅ¼ toole do <em>observability</em> (metryki, logi, profilery), szczegÃ³lnie w zaawansowanych problemach technicznych - bez nich moÅ¼na tylko <em>gdybaÄ‡</em>, co siÄ™ wydarzyÅ‚o. Z tak <strong>otwartym umysÅ‚em i przydatnymi narzÄ™dziami</strong> duÅ¼o Å‚atwiej przejÅ›Ä‡ do poszukiwania <strong>przyczyn i rozwiÄ…zaÅ„</strong>.</p>\n<h3 id=\"dÄ…Å¼enie-do-prawdy-i-pewnoÅ›Ä‡-siebie\">DÄ…Å¼enie do prawdy i pewnoÅ›Ä‡ siebie</h3>\n<p>Tu zdecydowanie moÅ¼na skÅ‚oniÄ‡ siÄ™ ku sprawie <strong>projektowania technicznego i dyskusji</strong>. MogÄ… zdarzyÄ‡ siÄ™ sytuacje, Å¼e dana osoba moÅ¼e wykorzystaÄ‡ swoje <strong>wyÅ¼sze stanowisko</strong> (np. urzÄ™dnik w instytucji paÅ„stwowej) do wywarcia nacisku i narzucenia swojego zdania, mimo Å¼e mamy wzglÄ™dem tego uzasadnione wÄ…tpliwoÅ›ci. Zadaniem obiektywisty jest <strong>zachowanie pewnoÅ›ci siebie</strong> pomimo nacisku i podejmowanie prÃ³b dÄ…Å¼enia do prawdy: </p>\n<ul>\n<li>toczenie <strong>merytorycznej dyskusji</strong> opartej na <strong>szacunku</strong>, </li>\n<li><strong>zadawanie</strong> odpowiednich <strong>pytaÅ„</strong>, </li>\n<li>prÃ³ba uÅ›wiadomienia o <strong>skutkach</strong> </li>\n<li>wspÃ³lne wypracowanie <strong>najlepszych rozwiÄ…zaÅ„</strong></li>\n</ul>\n<p>DÄ…Å¼enie do prawdy eksponuje zwracajÄ…cego uwagÄ™ na <em>krytykÄ™</em> i powoduje <em>ryzyko ponoszenia konsekwencji</em>, dlatego konieczne jest wywaÅ¼enie <em>stosunku korzyÅ›ci do potencjalnych strat</em>. Czasem nie warto. Ale czasem tak!</p>\n<p><img src=\"/images/posts/obiektywizm/mountains.jpg\"></p>\n<h3 id=\"racjonalny-egoizm\">Racjonalny egoizm</h3>\n<p><em>WaÅ¼na notatka:\nChciaÅ‚abym z gÃ³ry uprzedziÄ‡ zÅ‚e skojarzenia, w tym kontekÅ›cie egoizm to poglÄ…d, Å¼e kaÅ¼dy powinien realizowaÄ‡ swoje potrzeby samodzielnie, zgodnie z jego hierarchiÄ… wartoÅ›ci i kodeksem moralnym opartym na braku agresji. Racjonalny egoizm koliduje z potocznÄ… definicjÄ… egoizmu - wedÅ‚ug ktÃ³rej egoista krzywdzi ludzi, tutaj nie ma to miejsca. Racjonalny egoista MUSI uwzglÄ™dniaÄ‡ prawa naturalne innych i umowy, jakie zawarÅ‚. </em></p>\n<p>Ayn Rand w swojej filozofii stworzyÅ‚a nowy termin - <strong>racjonalny egoizm</strong>. To system etyczny opierajÄ…cy siÄ™ na rozumie i racjonalnym dÄ…Å¼eniu do wÅ‚asnego dobra. WaÅ¼nym kryterium decyzyjnym jest <strong>racjonalnoÅ›Ä‡</strong> i <strong>hierarchia wartoÅ›ci</strong> danej osoby, wedÅ‚ug racjonalnego egoizmu <em>nie naleÅ¼y poÅ›wiÄ™caÄ‡ wyÅ¼szej wartoÅ›ci w imiÄ™ wartoÅ›ci niÅ¼szej lub jej braku</em>. JeÅ›li coÅ› nie jest w <strong>interesie</strong> egoisty, to poÅ›wiÄ™cenie siÄ™ powinno zostaÄ‡ <strong>uzasadnione</strong>, na przykÅ‚ad na podstawie <strong>cnÃ³t danej osoby</strong>.</p>\n<blockquote>\n<p>â€œKonflikt pomiÄ™dzy egoizmem i altruizmem polega na odmiennych odpowiedziach na\nto pytanie. Egoizm utrzymuje, Å¼e czÅ‚owiek jest celem samym w sobie, altruizm â€” Å¼e\nczÅ‚owiek jest narzÄ™dziem do realizacji celÃ³w innych ludzi. Egoizm jest zdania, iÅ¼\nmoralnie wartoÅ›ciowe jest to, aby z poczynaÅ„ korzystaÅ‚a osoba, ktÃ³ra je podejmuje,\naltruizm upatruje moralnej wartoÅ›ci w tym, iÅ¼ dziaÅ‚anie jest korzystne dla kogoÅ›\ninnego niÅ¼ dziaÅ‚ajÄ…ca osoba. â€œ - <span> Nathaniel Branden, Cnota Egoizmu </span></p>\n</blockquote>\n<p>Racjonalny egoizm moÅ¼e byÄ‡ bardzo przydatny przy rzeczach typu <strong>negocjowanie wÅ‚asnych warunkÃ³w</strong> w pracy - na przykÅ‚ad adekwatna pensja, nie zgadzanie siÄ™ na poÅ›wiÄ™canie zdrowia kosztem pracy. To teÅ¼ dbanie o siebie i o swÃ³j <strong>work-life balance</strong>.</p>\n<p>To moÅ¼e byÄ‡ umiejÄ™tnoÅ›Ä‡ <strong>negocjowania warunkÃ³w biznesowych</strong> lub <strong>odrzucania zbyt duÅ¼ej iloÅ›ci zadaÅ„</strong>, ktÃ³re nie naleÅ¼Ä… do domeny i interesu zespoÅ‚u. Racjonalny egoista powinien umieÄ‡ <strong>wartoÅ›ciowaÄ‡</strong>, ktÃ³re zadania sÄ… rzeczywiÅ›cie <em>waÅ¼ne</em>, a na ktÃ³re jest wywierana bezpodstawna presja. PrzykÅ‚adowo (<em>to wymyÅ›lony przykÅ‚ad!!</em>), odrzucanie tworzenia potencjalnego dÅ‚ugu technicznego w zwiÄ…zku z nieprzemyÅ›lanÄ… decyzjÄ… UX designera. Przed oczami racjonalnego egoisty moÅ¼e siÄ™ pojawiÄ‡ wizja marnowania duÅ¼ej iloÅ›ci czasu developera i stresowania swojego zespoÅ‚u w imiÄ™ nieprzemyÅ›lanej decyzji.</p>\n<p>Egoizm <strong>nie musi byÄ‡ samolubny</strong>, jeÅ›li dane osoby sÄ… dla kogoÅ› waÅ¼ne, to moÅ¼e je ceniÄ‡ mocniej niÅ¼ siebie - np. swoje dziecko - i byÅ‚by zdolny poÅ›wiÄ™ciÄ‡ siÄ™ w jego imieniu. MoÅ¼na zauwaÅ¼yÄ‡, Å¼e ktoÅ› w pracy ma zbyt duÅ¼o zadaÅ„ i zaproponowaÄ‡ pomoc w ich realizacji. Egoizm <strong>nie wyklucza ludzkiego podejÅ›cia</strong> i <strong>dobroczynnoÅ›ci</strong> wzglÄ™dem innych - waÅ¼ne tutaj jest <strong>wartoÅ›ciowanie</strong>.</p>\n<h3 id=\"puÅ‚apki-obiektywizmu\">PuÅ‚apki â€œobiektywizmuâ€</h3>\n<p>Przez bÅ‚Ä™dne zrozumienie niektÃ³rych koncepcji obiektywizmu moÅ¼na wpaÅ›Ä‡ w kilka <strong>puÅ‚apek</strong> spowodowanych <strong>niecaÅ‚kowitym zrozumieniem</strong> tej filozofii.</p>\n<h3 id=\"pracoholizm--wypalenie-zawodowe\">Pracoholizm / Wypalenie zawodowe</h3>\n<p>GÅ‚Ã³wni bohaterowie powieÅ›ci Rand czÄ™sto byli w peÅ‚ni oddani pracy. <strong>Dagny Taggart</strong> z Atlasu Zbuntowanego, <strong>pracujÄ…ca do wyczerpania siÅ‚</strong> jako menadÅ¼erka kolei, ktÃ³re byÅ‚y na skraju upadku. <strong>Howard Roark</strong> z ksiÄ…Å¼ki Å¹rÃ³dÅ‚o, <strong>Å¼yjÄ…cy tylko dla realizacji artystycznych wizji</strong> swoich budynkÃ³w. </p>\n<p>Przez wiÄ™kszoÅ›Ä‡ fabuÅ‚y byli oni <strong>pracoholikami</strong>, ktÃ³rzy oparli caÅ‚kowicie <strong>swojÄ… wartoÅ›Ä‡ o pracÄ™</strong>. Przeczytanie ktÃ³rejÅ› z ksiÄ…Å¼ek w poÅ‚owie albo po prostu zbyt <strong>dosÅ‚owne</strong> rozumienie zachowania tych postaci, moÅ¼e wywoÅ‚aÄ‡ iluzjÄ™, Å¼e sÄ… wzorcami do naÅ›ladowania. PrzyjÄ™cie i naÅ›ladowanie takiego wzorca w poÅ‚Ä…czeniu z upartÄ… osobowoÅ›ciÄ… moÅ¼e prowadziÄ‡ do <strong>zbyt wysokich oczekiwaÅ„ wobec siebie</strong> i powolnego <strong>wypalenia zawodowego</strong>.</p>\n<h3 id=\"depresja\">Depresja</h3>\n<p>Obiektywista z <strong>zÅ‚udnym poczuciem</strong>, Å¼e moÅ¼e <strong>zmieniÄ‡</strong> dosÅ‚ownie <strong>caÅ‚e zÅ‚o na Å›wiecie</strong> - a jednoczeÅ›nie zawsze trafiajÄ…cy na <strong>mur</strong>, w pewnym momencie siÄ™ <em>zÅ‚amie</em>.\nNiektÃ³rych rzeczy po prostu <em>nie da siÄ™ zmieniÄ‡</em>. Pewnym rzeczom nie da siÄ™ <em>zapobiec</em>. Nawet bÄ™dÄ…c najlepszym, <em>nie zmienisz przeszÅ‚oÅ›ci</em>. <strong>Overthinking</strong>. </p>\n<p><strong>PrÃ³ba walczenia z wiatrakami</strong> <strong>koÅ„czÄ…ca siÄ™</strong> zawsze <strong>niepowodzeniem</strong> i <strong>poczucie</strong> bycia w <strong>klatce</strong> nieuchronnie zbliÅ¼a umysÅ‚ do popadania w <strong>depresjÄ™</strong>. </p>\n<p><img src=\"/images/posts/obiektywizm/sadness.jpg\"></p>\n<h3 id=\"nie-kaÅ¼dy-jest-taki-jak-ty\">Nie kaÅ¼dy jest taki jak Ty</h3>\n<p>Åšwiat racjonalnego egoisty jest prosty - dla niego jest oczywiste, Å¼e wybierze lepszÄ… rzecz niÅ¼ gorszÄ…. BÄ™dzie ceniÅ‚ <strong>bolesnÄ… szczeroÅ›Ä‡</strong> ponad <strong>sÅ‚odkÄ… sztucznoÅ›ciÄ…</strong>. Naturalnie bÄ™dzie szukaÅ‚ osÃ³b z <strong>wyÅ¼szymi cnotami</strong>. Upatruje w swoich przyjacioÅ‚ach autorytetu, wzorcÃ³w. </p>\n<p>Problem jest w tym, Å¼e czÄ™Å›Ä‡ ludzi zupeÅ‚nie nie zwraca uwagi na te kryteria i bazuje tylko na emocjach / wygodzie (?). W kaÅ¼dym razie, moÅ¼na prÃ³bowaÄ‡ byÄ‡ najlepszym, stawaÄ‡ na gÅ‚owie, rozwijaÄ‡ siÄ™ - a osoba, na ktÃ³rej Ci zaleÅ¼y <em>i tak nie zwrÃ³ci uwagi</em>.</p>\n<h3 id=\"wyzwolenie\">Wyzwolenie</h3>\n<p>Z wyÅ¼ej wymienionymi puÅ‚apkami moÅ¼na <strong>walczyÄ‡</strong>. Dobrym lekarstwem na te rzeczy to <strong>lekkie obniÅ¼enie oczekiwaÅ„</strong> i nabranie <strong>pokory</strong>. <strong>Nie idealizowanie</strong> siebie jako centrum wszechÅ›wiata. Zrozumienie, Å¼e Å›wiat nie oczekuje bycia herosem, a ciaÅ‚o i mÃ³zg nie sÄ… ze stali. Zrozumienie, Å¼e jest siÄ™ <em>czÅ‚owiekiem</em> i ma siÄ™ <strong>ludzkie ograniczenia</strong>.\nTo teÅ¼ <strong>cnoty</strong>, ktÃ³rych trzeba siÄ™ nauczyÄ‡.</p>\n<h3 id=\"podsumowanie\">Podsumowanie</h3>\n<p>Melancholijny koniec, ale nie chciaÅ‚am <strong>przekoloryzowaÄ‡ i idealizowaÄ‡</strong> kaÅ¼dego aspektu obiektywizmu. To nie jest cukierkowa filozofia, gdzie sÄ… odgÃ³rne zaÅ‚oÅ¼enia, Å¼e wszystko bÄ™dzie zawsze dobrze / albo, Å¼e bÄ™dzie zawsze Åºle. Obiektywizm to coÅ› <strong>pomiÄ™dzy</strong>, <em>szaroÅ›Ä‡</em>. <em>Nie szaroÅ›Ä‡ z czerni i bieli - a zmieszania wielu kolorÃ³w</em>. Ot taka rzeczywistoÅ›Ä‡. </p>\n<p><strong>SzczÄ™Å›cie, rozum i sens</strong> oddajÄ… <strong>istotÄ™ filozofii Å¼ycia na ziemi</strong> â€“ Å¼ycie, z <strong>otwartym umysÅ‚em, uzyskiwaniem osiÄ…gniÄ™Ä‡ i przyjemnoÅ›ciami</strong>. <em>Branie szczÄ™Å›cia garÅ›ciami</em> z aktualnych chwil, <em>stanie z uniesionÄ… gÅ‚owÄ… skierowanÄ… w kierunku przyszÅ‚oÅ›ci</em>. W rozwoju w IT obiektywizm moÅ¼e pomÃ³c w <strong>doskonaleniu siebie i rozwiÄ…zywaniu problemÃ³w</strong>. </p>\n<p><strong> Å»yczÄ™ kaÅ¼demu, by mÃ³gÅ‚ poczuÄ‡ tÄ™ radoÅ›Ä‡ zwiÄ…zanÄ… z odkryciem swojej drogi i duÅ¼o siÅ‚, ktÃ³re pozwolÄ… na realizacjÄ™ swoich celÃ³w. ğŸ”¥ </strong></p>\n<p>SzczÄ™Å›liwego Nowego Roku w\n2022</p>\n","excerpt":"Jednym z waÅ¼nych celÃ³w w Å¼yciu czÅ‚owieka jest satysfakcja z efektÃ³w produktywnej pracy - zaplanowanej i zorganizowanej przez racjonalny umysÅ‚. KreatywnoÅ›Ä‡ i uzyskiwanie korzystnych rezultatÃ³w z","description":"Czy moÅ¼na spÃ³jnie pogodziÄ‡ filozofiÄ™ i praktykÄ™ technicznÄ…? Jak najbardziej! Postaram siÄ™ przybliÅ¼yÄ‡, czym jest obiektywizm, jakie cechy promuje i jak mogÄ… siÄ™ przydaÄ‡ one w pracy w IT.","path":"/obiektywizm-a-rozwoj-w-it/","cover":"/images/posts/obiektywizm/atlas.jpg","tags":[{"id":"obiektywizm","title":"obiektywizm","path":"/tag/obiektywizm/"},{"id":"soft skills","title":"soft skills","path":"/tag/soft%20skills/"},{"id":"inÅ¼ynieria","title":"inÅ¼ynieria","path":"/tag/in%C5%BCynieria/"}],"author":{"id":"Julia Glaszka","title":"Julia Glaszka"}}},{"node":{"id":"507900b37c02db543d8fa26f4705fb1e","title":"Wykorzystaj caÅ‚y potencjaÅ‚ klastra MongoDB z pomocÄ… preferencji odczytu","timeToRead":3,"datetime":"2021-11-15 18:37:24","content":"<h1 id=\"\"></h1>\n<p>Typowy produkcyjny klaster jest zbudowany z co najmniej jednego ReplicaSetu. To oznacza, Å¼e posiadamy co najmniej jeden wÄ™zeÅ‚ Primary (realizujÄ…cy zapisy i odczyty) i kilka Secondary (tylko do odczytu). DomyÅ›lne ustawienia konfiguracji sterownikÃ³w kierujÄ… ruch wyÅ‚Ä…cznie do Primary, rezygnujÄ…c z uÅ¼ywania pozostaÅ‚ych hostÃ³w. To oznacza, Å¼e obciÄ…Å¼ony jest tylko jeden node, a reszta pozostaje bierna - zasoby pod wzglÄ™dem load-balancingu sÄ… marnowane. W przypadku awarii Mastera tracimy teÅ¼ moÅ¼liwoÅ›Ä‡ odczytÃ³w, ktÃ³re mogÅ‚yby byÄ‡ nadal realizowane przez Secondary.</p>\n<p>Zatem w jaki sposÃ³b moÅ¼na wymusiÄ‡ kierowanie ruchu do innych hostÃ³w niÅ¼ Primary? Z pomocÄ… przychodzÄ… nam preferencje odczytu - tzw. <code>ReadPreference</code>. Posiada on rÃ³Å¼ne tryby, pozwalajÄ…ce na wybranie algorytmu poszukiwania hosta, do ktÃ³rego wyÅ›lemy query.</p>\n<h2 id=\"konfiguracja-preferencji-odczytu-w-driverze\">Konfiguracja preferencji odczytu w driverze</h2>\n<p>Ustawienia <code>ReadPreference</code> moÅ¼na zdefiniowaÄ‡ w kilku miejscach:</p>\n<ul>\n<li>na poziomie klastra:</li>\n</ul>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">MongoClient</span><span style=\"color: #FFFFFF\"> mongoClient </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">MongoClients</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">create(</span><span style=\"color: #569CD6\">MongoClientSettings</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">builder()  </span>\n<span style=\"color: #FFFFFF\">.hosts(listOfHostsUrls)</span>\n<span style=\"color: #FFFFFF\">.readPreference(</span><span style=\"color: #569CD6\">ReadPreference</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">secondary())  </span>\n<span style=\"color: #FFFFFF\">.build());</span></code></pre>\n<ul>\n<li>na poziomie bazy danych</li>\n</ul>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">MongoDatabase</span><span style=\"color: #FFFFFF\"> database </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> mongoClient</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">getDatabase(</span><span style=\"color: #CE9178\">\"someDatabase\"</span><span style=\"color: #FFFFFF\">)  </span>\n<span style=\"color: #FFFFFF\">.withReadPreference(</span><span style=\"color: #569CD6\">ReadPreference</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">secondary());</span></code></pre>\n<ul>\n<li>na poziomie kolekcji</li>\n</ul>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">MongoCollection&lt;Document&gt;</span><span style=\"color: #FFFFFF\"> collection </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> database</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">getCollection(</span><span style=\"color: #CE9178\">\"videos\"</span><span style=\"color: #FFFFFF\">)  </span>\n<span style=\"color: #FFFFFF\">.withReadPreference(</span><span style=\"color: #569CD6\">ReadPreference</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">secondary());</span></code></pre>\n<p>Podane ustawienia mogÄ… zmieniaÄ‡ dziaÅ‚anie usÅ‚ugi, jeÅ›li na przykÅ‚ad posiada na klastrze kilka rÃ³Å¼nych baz danych z rÃ³Å¼nymi kolekcjami. MoÅ¼e byÄ‡ tak, Å¼e nie dla wszystkich kolekcji moÅ¼na sobie pozwoliÄ‡ na odczyt z Secondary - np. gdy potrzebujemy wyÅ¼szy poziom consistency.</p>\n<h2 id=\"tryby-odczytu\">Tryby odczytu</h2>\n<h3 id=\"primary\">primary</h3>\n<p>DomyÅ›lny dla wielu driverÃ³w. Kieruje ruch wyÅ‚Ä…cznie do hosta typu Primary, co moÅ¼e byÄ‡ znaczÄ…cÄ… barierÄ… w skalowaniu usÅ‚ugi pod kÄ…tem odczytÃ³w.</p>\n<h3 id=\"primarypreferred\">primaryPreferred</h3>\n<p>W tej preferencji w gÅ‚Ã³wnej mierze odczytujemy z hosta Primary, ale w przypadku gdy bÄ™dzie niedostÄ™pny to odczyty zostanÄ… przekierowana do innych replik typu Secondary.</p>\n<h3 id=\"secondary\">secondary</h3>\n<p>Wszystkie odczyty sÄ… kierowane do Secondary.</p>\n<h3 id=\"secondarypreferred\">secondaryPreferred</h3>\n<p>W wiÄ™kszoÅ›ci przypadkÃ³w odczytujemy z Secondary, ale przy awarii wszystkich hostÃ³w ruch moÅ¼e zostaÄ‡ przekierowany do Primary.</p>\n<h3 id=\"nearest\">nearest</h3>\n<p>Driver selekcjonuje zdrowe hosty z odpowiednio krÃ³tkim czasem odpowiedzi, tak by odpowiedziaÅ‚y maksymalnie szybko - np w ramach jednego datacenter. NastÄ™pnie losowo wybierany jest jeden host, ktÃ³ry zrealizuje Å¼Ä…danie. Nie jest uwzglÄ™dniane czy node jest Primary czy Secondary.</p>\n<h2 id=\"jaki-tryb-odczytu-wybraÄ‡\">Jaki tryb odczytu wybraÄ‡?</h2>\n<p>W przypadku usÅ‚ugi typu heavy read z eventual consistency najbardziej optymalne bÄ™dzie odczytywanie z preferencjami: <code>nearest</code>, <code>secondaryPreferred</code> lub <code>secondary</code>. WybÃ³r konkretnej preferencji zaleÅ¼aÅ‚by w tym przypadku od iloÅ›ci zapisÃ³w oraz posiadanych hostÃ³w i zasobÃ³w. JeÅ›li usÅ‚uga bardzo duÅ¼o zapisuje i Primary jest juÅ¼ dostatecznie obciÄ…Å¼ony, moÅ¼na rozwaÅ¼yÄ‡ unikanie dociÄ…Å¼ania Primary poprzez preferencjÄ™ <code>secondary</code> lub <code>secondaryPreferred</code>.</p>\n<p>Ostateczny wybÃ³r miÄ™dzy pozostaÅ‚ymi dwoma typami odczytÃ³w moÅ¼e rozstrzygnÄ…Ä‡ to - czy bardziej zaleÅ¼y nam na stabilnoÅ›ci odczytÃ³w czy zapisÃ³w. SecondaryPreferred dostarcza n+1 hostÃ³w, natomiast samo secondary tylko n (bo nie uwzglÄ™dnia Primary).</p>\n<p>W sytuacji niespodziewanie wiÄ™kszego ruchu warto mieÄ‡ wiÄ™cej dostÄ™pnych hostÃ³w niÅ¼ mniej, ale analizujÄ…c z drugiej strony - ten jeden dodatkowy host to Primary, jeÅ›li zostanie obciÄ…Å¼ony to doprowadzi to rÃ³wnieÅ¼ do niestabilnoÅ›ci zapisÃ³w. JeÅ›li usÅ‚uga nie posiada mechanizmÃ³w ponowieÅ„ takich jak klienci z ponowieniami lub message queue, to dane mogÄ… zostaÄ‡ niezapisane, co skÅ‚aniaÅ‚oby do uÅ¼ycia preferencji secondary - wtedy awaria dotyczyÅ‚aby tylko odczytÃ³w.</p>\n<h2 id=\"po-wdroÅ¼eniu\">Po wdroÅ¼eniu</h2>\n<p>Po wdroÅ¼eniu nowego typu preferencji warto mieÄ‡ wglÄ…d w metryki:</p>\n<ul>\n<li>czasÃ³w odpowiedzi usÅ‚ugi</li>\n<li>czasÃ³w odpowiedzi bazy danych do usÅ‚ugi</li>\n<li>load, zajÄ™toÅ›Ä‡ ramu, iloÅ›Ä‡ rps do kolekcji, obciÄ…Å¼enie sieciowe klastra mongo</li>\n</ul>\n<h2 id=\"podsumowanie\">Podsumowanie</h2>\n<p>Jak widaÄ‡, kaÅ¼de takie ustawienie trzeba samodzielnie przeanalizowaÄ‡, uwzglÄ™dniajÄ…c swoje wÅ‚asne wymagania wzglÄ™dem stabilnoÅ›ci. Wybranie konkretnej preferencji odczytu moÅ¼e mieÄ‡ dalekosiÄ™Å¼ne skutki, dlatego przed wyborem zawsze warto siÄ™ dÅ‚uÅ¼ej zastanowiÄ‡ i przeanalizowaÄ‡ sÅ‚abe punkty konkretnego rozwiÄ…zania. Polecam rÃ³wnieÅ¼ zapoznaÄ‡ siÄ™ z <a href=\"https://docs.mongodb.com/manual/core/read-preference/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">oficjalnÄ… dokumentacjÄ…</a>.</p>\n","excerpt":" Typowy produkcyjny klaster jest zbudowany z co najmniej jednego ReplicaSetu. To oznacza, Å¼e posiadamy co najmniej jeden wÄ™zeÅ‚ Primary (realizujÄ…cy zapisy i odczyty) i kilka Secondary (tylko do","description":"MongoDB dostarcza wiele mechanizmÃ³w sterowania consistency. Jak uzyskaÄ‡ wiÄ™kszÄ… przepustowoÅ›Ä‡ odczytu kosztem spÃ³jnoÅ›ci danych? O tym w dzisiejszym poÅ›cie!","path":"/wykorzystaj-caly-potencjal-klastra-mongo-db-z-pomoca-preferencji-odczytu/","cover":"/images/posts/mongodb-read-preferences/route.jpg","tags":[{"id":"mongodb","title":"mongodb","path":"/tag/mongodb/"},{"id":"java","title":"java","path":"/tag/java/"},{"id":"database","title":"database","path":"/tag/database/"}],"author":{"id":"Julia Glaszka","title":"Julia Glaszka"}}},{"node":{"id":"c854d4a554f3e6aa74a421fac8beb243","title":"Konfiguracja ClusterSettings w MongoDB Java Driver","timeToRead":4,"datetime":"2021-10-07 20:22:24","content":"<p>Powszechnie wykorzystywane klienty do Å‚Ä…czenia siÄ™ z bazÄ… danych dostarczajÄ… wiele funkcjonalnoÅ›ci i moÅ¼liwoÅ›ci konfiguracji, ktÃ³re moÅ¼na przeoczyÄ‡ - a sÄ… bardzo przydatne i mogÄ… zoptymalizowaÄ‡ dziaÅ‚anie usÅ‚ugi. Warto poznaÄ‡ parÄ™ przydatnych ustawieÅ„, ktÃ³re potencjalnie moÅ¼na przetestowaÄ‡ w swoich aplikacjach.</p>\n<h3 id=\"czym-sÄ…-drivery-do-baz-danych\">Czym sÄ… drivery do baz danych?</h3>\n<p>Drivery dziaÅ‚ajÄ… z reguÅ‚y w taki sposÃ³b, Å¼e zarzÄ…dzajÄ… poÅ‚Ä…czeniami otwieranymi do bazy danych, dostarczajÄ…c przydatne funkcje i logikÄ™ - na przykÅ‚ad ograniczeniem puli poÅ‚Ä…czeÅ„ czy eliminacji gorzej dziaÅ‚ajÄ…cych hostÃ³w. OwrapowujÄ… caÅ‚Ä… logikÄ™ w przyjazny interfejs api, odciÄ…Å¼ajÄ…c programistÄ™ od rozumienia internali Takich rzeczy raczej nie opÅ‚aca siÄ™ implementowaÄ‡ samemu od zera, ale nie oznacza to Å¼e jest to niewykonalne. SÄ… rÃ³Å¼ne drivery i moÅ¼na nawet do nich kontrybuowaÄ‡, bo w wiÄ™kszoÅ›ci przypadkÃ³w sÄ… open-source.</p>\n<h3 id=\"clustersettings\">ClusterSettings</h3>\n<p>Klaster to grupa hostÃ³w mongo, ktÃ³re udostÄ™pniajÄ… razem pewien zbiÃ³r danych, skÅ‚ada siÄ™ z shardÃ³w (opcjonalnie), config serverÃ³w i replica setÃ³w. Ustawienia dotyczÄ…ce klastra moÅ¼na skonfigurowaÄ‡ za pomocÄ… klasy <code>ClusterSettings</code>, ktÃ³ra zawiera takie modyfikowalne elementy jak lista hostÃ³w, do ktÃ³rych chcemy siÄ™ Å‚Ä…czyÄ‡, nazwa replicasetu, rÃ³Å¼ne polityki wybierania hostÃ³w, ktÃ³rego wykorzystamy do wysÅ‚ania zapytania do bazy.</p>\n<h3 id=\"localthreshold\">localThreshold</h3>\n<p>UmoÅ¼liwia sterownikowi wybraÄ‡ hosty, ktÃ³re majÄ… najszybszy czas odpowiedzi i sÄ… na maszynach fizycznych w najbliÅ¼szej moÅ¼liwej lokalizacji - na przykÅ‚ad w ramach jednego datacenter. Parametr <code>localTreshold</code> to prÃ³g czasu, ktÃ³ry zaczyna byÄ‡ odliczany od momentu uzyskania najszybszej odpowiedzi z serwera mongo. Wszystkie hosty, ktÃ³re odpowiedzÄ… w zadanym okresie (ping najszybszego serwera + czas local threshold) zostanÄ… zakwalifikowane do wykonywania Å¼Ä…daÅ„ do bazy. Najlepiej obrazuje to rysunek:</p>\n<p><img src=\"/images/posts/cluster-settings-mongo/local-threshold.png\" alt=\"Wizualizacja Local Threshold\" title=\"Wizualizacja Local Threshold\"></p>\n<p>PrzykÅ‚adowo: istniejÄ… 3 serwery mongod, ktÃ³re odpowiadajÄ… w czasie <code>5ms</code>, <code>9ms</code> i <code>27ms</code>. Ustawiono na sterowniku <code>localThreshold=20ms</code>. Jako Å¼e najszybszy czas odpowiedzi to 5ms, a jeszcze do niego naleÅ¼y doliczyÄ‡ zdefiniowany threshold czyli <code>20ms</code>, to Å‚Ä…cznie maksymalny czas odpowiedzi wyniesie <code>25ms</code>. Serwer odpowiadajÄ…cy w czasie 9ms zakwalifikuje siÄ™ do serwowania danych, natomiast serwer ktÃ³remu odpowiedÅº zajÄ™Å‚a <code>27ms</code> zostaje odrzucony - poniewaÅ¼ akceptowano czas maksymalny <code>25ms</code>. </p>\n<p>JeÅ›li zostanie utracona Å‚Ä…cznoÅ›Ä‡ z serwerem, ktÃ³ry wczeÅ›niej odpowiadaÅ‚ w <code>5ms</code>, a zostanÄ… nam dwa serwery z <code>9ms</code> i <code>27ms</code>, to wybierzemy oba, poniewaÅ¼ local threshold siÄ™ przesunÄ…Å‚ (<code>9ms + 20ms = 29ms</code>).</p>\n<p>Na dopasowanie tego parametru nie ma uniwersalnego wzoru i trzeba go skonfigurowaÄ‡ zgodnie z realnymi czasami z wÅ‚asnych dc, przydatne mogÄ… byÄ‡ w tym celu metryki czasÃ³w odpowiedzi. Raczej nie ma wiÄ™kszego powodu, by w normalnym trybie dziaÅ‚ania aplikacji odpytywaÄ‡ nie-lokalne datacenter, a sam <code>localThreshold</code> jest na tyle elastyczny, Å¼e moÅ¼e siÄ™ przesuwaÄ‡ podczas awarii jednej serwerowni i nie odetnie usÅ‚ugi od bazy danych tylko przekieruje do innego datacenter. </p>\n<p>DomyÅ›lnie wartoÅ›Ä‡ ta przyjmuje <code>15ms</code> w sterowniku javowym, wiÄ™c raczej nie ma co siÄ™ niepokoiÄ‡ Å¼e aktualnie ruch krÄ…Å¼y miÄ™dzy dc - chyba Å¼e datacenters majÄ… bardzo szybkie czasy odpowiedzi miÄ™dzy sobÄ….</p>\n<p>PrzykÅ‚adowa konfiguracja:</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">MongoClient</span><span style=\"color: #FFFFFF\"> mongoClient </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">MongoClients</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">create(</span>\n<span style=\"color: #FFFFFF\">                </span><span style=\"color: #569CD6\">MongoClientSettings</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">builder()</span>\n<span style=\"color: #FFFFFF\">                        .applyToClusterSettings(builder </span><span style=\"color: #D4D4D4\">-&gt;</span>\n<span style=\"color: #FFFFFF\">                                builder</span>\n<span style=\"color: #FFFFFF\">                                        .hosts(</span><span style=\"color: #569CD6\">Collections</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">singletonList(</span><span style=\"color: #569CD6\">new</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">ServerAddress</span><span style=\"color: #FFFFFF\">(</span><span style=\"color: #CE9178\">\"mongos.somedomain.local\"</span><span style=\"color: #FFFFFF\">, </span><span style=\"color: #B5CEA8\">27017</span><span style=\"color: #FFFFFF\">)))</span>\n<span style=\"color: #FFFFFF\">                                        .localThreshold(</span><span style=\"color: #B5CEA8\">50</span><span style=\"color: #FFFFFF\">, </span><span style=\"color: #569CD6\">TimeUnit</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">MILLISECONDS)</span>\n<span style=\"color: #FFFFFF\">                        )</span>\n<span style=\"color: #FFFFFF\">                        .build())</span></code></pre>\n<h3 id=\"serverselectiontimeout\">serverSelectionTimeout</h3>\n<p>Podobnie jak localThreshold, umoÅ¼liwia sterownikowi odseparowanie hostÃ³w z najgorszymi czasami odpowiedzi. Tym razem to jest maksymalny czas, po ktÃ³rym przestaniemy uwzglÄ™dniaÄ‡ tego hosta. MoÅ¼e byÄ‡ przydatny w momencie, gdy wszystkie hosty bÄ™dÄ… przeciÄ…Å¼one i nie warto juÅ¼ dociÄ…Å¼aÄ‡ ich bardziej.</p>\n<p>PrzykÅ‚adowo, wszystkie hosty sÄ… obciÄ…Å¼one i majÄ… ping <code>470ms</code>, <code>490ms</code>, <code>550ms</code>. Przy <code>serverSelectionTimeout=500ms</code> odrzucimy hosta ktÃ³ry odpowiedziaÅ‚ sumarycznie w czasie <code>550ms</code>.</p>\n<p>DomyÅ›lnie przyjmuje wartoÅ›Ä‡ <code>30s</code>.</p>\n<p>PrzykÅ‚adowa konfiguracja:</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">MongoClient</span><span style=\"color: #FFFFFF\"> mongoClient </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">MongoClients</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">create(</span>\n<span style=\"color: #FFFFFF\">                </span><span style=\"color: #569CD6\">MongoClientSettings</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">builder()</span>\n<span style=\"color: #FFFFFF\">                        .applyToClusterSettings(builder </span><span style=\"color: #D4D4D4\">-&gt;</span>\n<span style=\"color: #FFFFFF\">                                builder</span>\n<span style=\"color: #FFFFFF\">                                        .hosts(</span><span style=\"color: #569CD6\">Collections</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">singletonList(</span><span style=\"color: #569CD6\">new</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">ServerAddress</span><span style=\"color: #FFFFFF\">(</span><span style=\"color: #CE9178\">\"mongos.somedomain.local\"</span><span style=\"color: #FFFFFF\">, </span><span style=\"color: #B5CEA8\">27017</span><span style=\"color: #FFFFFF\">)))</span>\n<span style=\"color: #FFFFFF\">                              .serverSelectionTimeout(</span><span style=\"color: #B5CEA8\">500</span><span style=\"color: #FFFFFF\">, </span><span style=\"color: #569CD6\">TimeUnit</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">MILLISECONDS)</span>\n<span style=\"color: #FFFFFF\">                        )</span>\n<span style=\"color: #FFFFFF\">                        .build());</span></code></pre>\n<h3 id=\"requiredreplicasetname\">requiredReplicaSetName</h3>\n<p>Nazwa replicasetu, z ktÃ³rym aplikacja ma siÄ™ poÅ‚Ä…czyÄ‡. Przydatne, jeÅ›li istnieje wiele replicasetÃ³w na jednym klastrze. </p>\n<h3 id=\"clusterlistener\">clusterListener</h3>\n<p>Listener, dziÄ™ki ktÃ³remu moÅ¼na nasÅ‚uchiwaÄ‡ na zdarzenia zwiÄ…zane z klastrem - poÅ‚Ä…czenie, zmianÄ™, zamkniÄ™cie poÅ‚Ä…czenia. Przydatne przy zbieraniu metryk, debugowaniu, integracjach z bibliotekami. Aby to wykorzystaÄ‡, naleÅ¼y zaimplementowaÄ‡ metody w interfejsie ClusterListener (jawnie lub zaimplementowaÄ‡ jako nowÄ… klasÄ™).</p>\n<p>PrzykÅ‚adowa konfiguracja:</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">MongoClient</span><span style=\"color: #FFFFFF\"> mongoClient </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">MongoClients</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">create(</span>\n<span style=\"color: #FFFFFF\">                </span><span style=\"color: #569CD6\">MongoClientSettings</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">builder()</span>\n<span style=\"color: #FFFFFF\">                        .applyToClusterSettings(builder </span><span style=\"color: #D4D4D4\">-&gt;</span>\n<span style=\"color: #FFFFFF\">                                builder</span>\n<span style=\"color: #FFFFFF\">                                        .hosts(</span><span style=\"color: #569CD6\">Collections</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">singletonList(</span><span style=\"color: #569CD6\">new</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">ServerAddress</span><span style=\"color: #FFFFFF\">(</span><span style=\"color: #CE9178\">\"mongos.somedomain.local\"</span><span style=\"color: #FFFFFF\">, </span><span style=\"color: #B5CEA8\">27017</span><span style=\"color: #FFFFFF\">)))</span>\n<span style=\"color: #FFFFFF\">                                        .addClusterListener(</span><span style=\"color: #569CD6\">new</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">ClusterListener</span><span style=\"color: #FFFFFF\">() {</span>\n<span style=\"color: #FFFFFF\">                                            </span><span style=\"color: #569CD6\">@Override</span>\n<span style=\"color: #FFFFFF\">                                            </span><span style=\"color: #569CD6\">public</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">void</span><span style=\"color: #FFFFFF\"> clusterOpening(</span><span style=\"color: #569CD6\">ClusterOpeningEvent</span><span style=\"color: #FFFFFF\"> event) {</span>\n<span style=\"color: #FFFFFF\">                                                logger</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">info(</span><span style=\"color: #CE9178\">\"Successfully connected to cluster with id: {}\"</span><span style=\"color: #FFFFFF\">, event</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">getClusterId());</span>\n<span style=\"color: #FFFFFF\">                                                registerMetrics(event);</span>\n<span style=\"color: #FFFFFF\">                                                sendSomeInfoSomewhere();</span>\n<span style=\"color: #FFFFFF\">                                                doSomething();</span>\n<span style=\"color: #FFFFFF\">                                            }</span>\n\n<span style=\"color: #FFFFFF\">                                            </span><span style=\"color: #569CD6\">@Override</span>\n<span style=\"color: #FFFFFF\">                                            </span><span style=\"color: #569CD6\">public</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">void</span><span style=\"color: #FFFFFF\"> clusterClosed(</span><span style=\"color: #569CD6\">ClusterClosedEvent</span><span style=\"color: #FFFFFF\"> event) {</span>\n<span style=\"color: #FFFFFF\">                                                logger</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">info(</span><span style=\"color: #CE9178\">\"Connection to cluster closed with id: {}\"</span><span style=\"color: #FFFFFF\">, event</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">getClusterId());</span>\n<span style=\"color: #FFFFFF\">                                                sendSomeInfoSomewhere();</span>\n<span style=\"color: #FFFFFF\">                                            }</span>\n\n<span style=\"color: #FFFFFF\">                                            </span><span style=\"color: #569CD6\">@Override</span>\n<span style=\"color: #FFFFFF\">                                            </span><span style=\"color: #569CD6\">public</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">void</span><span style=\"color: #FFFFFF\"> clusterDescriptionChanged(</span><span style=\"color: #569CD6\">ClusterDescriptionChangedEvent</span><span style=\"color: #FFFFFF\"> event) {</span>\n<span style=\"color: #FFFFFF\">                                                logger</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">info(</span><span style=\"color: #CE9178\">\"Cluster description changed with id: {}\"</span><span style=\"color: #FFFFFF\">, event</span><span style=\"color: #D4D4D4\">.</span><span style=\"color: #FFFFFF\">getClusterId());</span>\n<span style=\"color: #FFFFFF\">                                                doSomething();</span>\n<span style=\"color: #FFFFFF\">                                            }</span>\n<span style=\"color: #FFFFFF\">                                        })</span>\n<span style=\"color: #FFFFFF\">                        )</span></code></pre>\n<h3 id=\"dokumentacja-mongodb\">Dokumentacja MongoDB</h3>\n<p>ZachÄ™cam do skorzystania z <a href=\"http://mongodb.github.io/mongo-java-driver/4.3/apidocs/mongodb-driver-core/com/mongodb/connection/ClusterSettings.Builder.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dokumentacji mongo-java-drivera dla ClusterSettings</a>. MoÅ¼na tu znaleÅºÄ‡ wiele przydatnych informacji na temat tych i innych parametrÃ³w. O parametrach moÅ¼na przeczytaÄ‡ rÃ³wnieÅ¼ w <a href=\"https://github.com/mongodb/specifications/blob/master/source/server-selection/server-selection.rst#localthresholdms\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">oficjalnych wytycznych</a>_.</p>\n<p>To kilka przydatnych wartoÅ›ci, ktÃ³re warto znaÄ‡ i Å›wiadomie wykorzystywaÄ‡. </p>\n","excerpt":"Powszechnie wykorzystywane klienty do Å‚Ä…czenia siÄ™ z bazÄ… danych dostarczajÄ… wiele funkcjonalnoÅ›ci i moÅ¼liwoÅ›ci konfiguracji, ktÃ³re moÅ¼na przeoczyÄ‡ - a sÄ… bardzo przydatne i mogÄ… zoptymalizowaÄ‡","description":"Powszechnie wykorzystywane klienty do Å‚Ä…czenia siÄ™ z bazÄ… danych dostarczajÄ… wiele przydatnych funkcjonalnoÅ›ci i moÅ¼liwoÅ›ci konfiguracji. Warto poznaÄ‡ parÄ™ ustawieÅ„, ktÃ³re potencjalnie mogÄ… usprawniÄ‡ pracÄ™ Twoich aplikacji.","path":"/konfiguracja-cluster-settings-w-mongo-db-java-driver/","cover":"/images/posts/cluster-settings-mongo/adjusting.jpg","tags":[{"id":"mongodb","title":"mongodb","path":"/tag/mongodb/"},{"id":"java","title":"java","path":"/tag/java/"},{"id":"database","title":"database","path":"/tag/database/"}],"author":{"id":"Julia Glaszka","title":"Julia Glaszka"}}},{"node":{"id":"8fa5a7196f6a5cf6e3f3573332ce17ab","title":"Elasticsearch - to nie tylko logi.","timeToRead":5,"datetime":"2020-09-07 22:56:24","content":"<p>Elasticsearch to zaawansowany silnik wyszukiwaÅ„ a jednoczeÅ›nie baza danych pozwalajÄ…ca na przechowywanie rÃ³Å¼nych typÃ³w danych. Wykorzystywana jest gÅ‚Ã³wnie przy komercyjnych wyszukiwarkach oraz przy gromadzeniu logÃ³w systemowych. DziÄ™ki Elasticsearch, moÅ¼esz wykonywaÄ‡ skomplikowane wyszukiwania, filtry i agregacje, a takÅ¼e wykorzystywaÄ‡ sÅ‚owniki.</p>\n<h3 id=\"wstÄ™pne-ustalenia\">WstÄ™pne ustalenia</h3>\n<p>OgÃ³lnie myÅ›lÄ™, Å¼e sensownie bÄ™dzie zapisywaÄ‡ dziaÅ‚ania do plikÃ³w, dziÄ™ki czemu bÄ™dzie Å‚atwiej zrekonstruowaÄ‡ listÄ™ krokÃ³w. Warto utworzyÄ‡ tworzyÄ‡ osobny katalog na czas Ä‡wiczeÅ„. CaÅ‚oÅ›Ä‡ prawdopodobnie zÅ‚oÅ¼Ä™ jako projekt na githubie, wiÄ™c bÄ™dzie dostÄ™pny do sklonowania. </p>\n<h3 id=\"przykÅ‚adowy-use-case\">PrzykÅ‚adowy use case</h3>\n<p>Razem z moim trzyosobowym zespoÅ‚em w ramach hobbystycznych praktyk rozwijaliÅ›my mini-platformÄ™ do wystawiania ogÅ‚oszeÅ„. Jednym z wymagaÅ„ byÅ‚a wyszukiwarka, dziÄ™ki ktÃ³rej mozna wyszukiwaÄ‡ produkty: po tytule, slowach kluczowych, kategorii, cenie i lokalizacji. ZdecydowaliÅ›my siÄ™ na elasticsearch, poniewaÅ¼ wspiera wyszukiwanie peÅ‚notekstowe i geograficzne.</p>\n<p><img src=\"/images/posts/elasticsearch-zapytania/searching.jpg\"></p>\n<h3 id=\"setup\">Setup</h3>\n<p>Na potrzeby zabawy postawimy sobie 2 kontenery dockerowe z elasticem + kibanÄ…. ZdefiniowaliÅ›my:</p>\n<ul>\n<li>1 kontener z elasticsearch w wersji 7.8.0</li>\n<li>1 kontener z kibanÄ… w wersji 7.6.0</li>\n<li>2 woluminy, na ktÃ³rych bÄ™dÄ… przechowywane dane</li>\n<li>sieÄ‡ o nazwie elastic-network</li>\n</ul>\n<p>Wersje nie sÄ… najnowsze, ale akurat miaÅ‚am te obrazy lokalnie na komputerze. MoÅ¼na w razie czego zmieniÄ‡ na nowszÄ….</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">version</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">'2.2'</span>\n<span style=\"color: #569CD6\">services</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">es01</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">image</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">docker.elastic.co/elasticsearch/elasticsearch:7.8.0</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">environment</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">bootstrap.memory_lock=true</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">\"ES_JAVA_OPTS=-Xms512m -Xmx512m\"</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">discovery.type=single-node</span>\n<span style=\"color: #FFFFFF\"> </span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">volumes</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">data01:/usr/share/elasticsearch/data</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">ports</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">9200:9200</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">networks</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">elastic-network</span>\n<span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">kibana01</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">image</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">docker.elastic.co/kibana/kibana:7.6.0</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">container_name</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">kib01</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">ports</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">5601:5601</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">environment</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">     </span><span style=\"color: #569CD6\">ELASTICSEARCH_URL</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">http://es01:9200</span>\n<span style=\"color: #FFFFFF\">     </span><span style=\"color: #569CD6\">ELASTICSEARCH_HOSTS</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">http://es01:9200</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">depends_on</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">es01</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">networks</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">     - </span><span style=\"color: #CE9178\">elastic-network</span>\n<span style=\"color: #FFFFFF\"> </span>\n<span style=\"color: #569CD6\">volumes</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">data01</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">driver</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">local</span>\n<span style=\"color: #FFFFFF\"> </span>\n<span style=\"color: #569CD6\">networks</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">elastic-network</span><span style=\"color: #FFFFFF\">:</span>\n<span style=\"color: #FFFFFF\">   </span><span style=\"color: #569CD6\">driver</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">bridge</span></code></pre>\n<p>Przeklejamy powyÅ¼szy plik do docker-compose.yml i zapisujemy. Posiadamy juÅ¼ deklaratywny plik, na podstawie ktÃ³rego docker-compose utworzy wszystko za nas.\nWykonujemy polecenie (dla osÃ³b z sÅ‚abszym internetem - moÅ¼e trochÄ™ potrwaÄ‡, bo pobierajÄ… siÄ™ obrazy):</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">docker-compose up</span></code></pre>\n<p>Sprawdzamy czy wszystko dziaÅ‚a:</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">docker ps</span></code></pre>\n<p>Powinny siÄ™ nam pojawiÄ‡ 2 dziaÅ‚ajace kontenery. JeÅ›li tak, to fajnie. :)</p>\n<h3 id=\"model-danych\">Model danych</h3>\n<p>Zanim cokolwiek ciekawego zaczniemy robiÄ‡, musimy zamodelowaÄ‡ nasze dane. </p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">    </span><span style=\"color: #CE9178\">\"title\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"text\"</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #CE9178\">\"description\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"text\"</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #CE9178\">\"location\":\"geo_point\"</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #CE9178\">\"price\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"double\"</span></code></pre>\n<p>Idziemy w maksymalne uproszczenie schematu. MyÅ›lÄ™, Å¼e model jest doÅ›Ä‡ czytelny. Id zostanie dodane automatycznie. Mamy title i description o typie text, location jest punktem (x,y), ktÃ³ry moÅ¼na osadziÄ‡ na mapie, price to cena - double. Tyle na teraz wystarczy.</p>\n<h3 id=\"mappingi--typy\">Mappingi &#x26; Typy</h3>\n<p>W Elasticu nasz â€œschemeâ€ definiujemy za pomocÄ… mappingÃ³w. OkreÅ›lamy w nich strukturÄ™ dokumentÃ³w (np offer ). W mappingach moÅ¼na rÃ³wnieÅ¼ zawrzeÄ‡ w nich dodatkowe techniczne ustawienia - iloÅ›Ä‡ replik, timeouty. Dawniej w jednym indexie mozna byÅ‚o przechowywaÄ‡ wiele typÃ³w, co powodowaÅ‚o czasem dziwne bÅ‚Ä™dy. Jednak w najnowszych wersjach elastica, jest jeden â€œtypâ€ per index. Da siÄ™ to ominÄ…Ä‡, znajdziesz to w <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/removal-of-types.html#_custom_type_field.\" title=\"dokumentacji\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">dokumentacji</a>.</p>\n<p>Zapisujemy poniÅ¼szÄ… skÅ‚adniÄ™ w pliku offer_mapping.json. UmoÅ¼liwi to nam stworzenie indeksu. Wykorzystamy go za chwile. </p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"mappings\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"properties\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">                  </span><span style=\"color: #D4D4D4\">\"type\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"text\"</span>\n<span style=\"color: #FFFFFF\">               },</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">                   </span><span style=\"color: #D4D4D4\">\"type\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"text\"</span>\n<span style=\"color: #FFFFFF\">               },</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">                   </span><span style=\"color: #D4D4D4\">\"type\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"geo_point\"</span>\n<span style=\"color: #FFFFFF\">               },</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">                   </span><span style=\"color: #D4D4D4\">\"type\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"double\"</span>\n<span style=\"color: #FFFFFF\">               }</span>\n<span style=\"color: #FFFFFF\">      }</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<p>Wykonujemy komendÄ™, tworzÄ…c tym samym nowy index.</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">curl -H </span><span style=\"color: #CE9178\">\"Content-Type: application/json\"</span><span style=\"color: #FFFFFF\"> -X PUT http://localhost:3000/offers --data </span><span style=\"color: #CE9178\">\"@offer_schema.json\"</span></code></pre>\n<p>W dalszej czÄ™Å›ci do wykonywania requestÃ³w bÄ™dÄ™ juÅ¼ uÅ¼ywaÄ‡ devtoolsÃ³w w kibanie, bo bÄ™dzie czytelniej. JeÅ›li nie chcesz tego uÅ¼ywaÄ‡ i wolisz CLI, z Å‚atwoÅ›ciÄ… wykonasz requesty np. curlem, jak powyÅ¼ej.</p>\n<h4 id=\"kibana-devtools\">Kibana Devtools</h4>\n<p><img src=\"/images/posts/elasticsearch-zapytania/elasticsearch-1.png\" alt=\"Tak wyglÄ…dajÄ… devtoolsy\" title=\"Tak wyglÄ…dajÄ… devtoolsy\"></p>\n<h3 id=\"feedowanie-danych\">Feedowanie danych</h3>\n<p>PoniÅ¼ej mini-zbiÃ³r danych do sprawdzenia, jak to dziaÅ‚a.</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">POST offers/_doc</span>\n<span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">              </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"skarpety rozmiar 36\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">              </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"kolorowe skarpetki w kropki\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">              </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\">:  {</span>\n<span style=\"color: #FFFFFF\">                 </span><span style=\"color: #D4D4D4\">\"lat\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">40</span><span style=\"color: #FFFFFF\">, </span>\n<span style=\"color: #FFFFFF\">                 </span><span style=\"color: #D4D4D4\">\"lon\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">-70</span>\n<span style=\"color: #FFFFFF\">               },</span>\n<span style=\"color: #FFFFFF\">              </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #B5CEA8\">10.00</span>\n<span style=\"color: #FFFFFF\">}</span>\n\n<span style=\"color: #FFFFFF\">POST offers/_doc</span>\n<span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"szelki\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"szelki w kolorze czarnym, rozmiar XS\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\">:  {</span>\n<span style=\"color: #FFFFFF\">                 </span><span style=\"color: #D4D4D4\">\"lat\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">50</span><span style=\"color: #FFFFFF\">, </span>\n<span style=\"color: #FFFFFF\">                 </span><span style=\"color: #D4D4D4\">\"lon\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">-40</span>\n<span style=\"color: #FFFFFF\">               },</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #B5CEA8\">14.00</span>\n\n<span style=\"color: #FFFFFF\">}</span>\n\n<span style=\"color: #FFFFFF\">POST offers/_doc</span>\n<span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"muszka\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"czerwona, mÄ™ska\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\">:  {</span>\n<span style=\"color: #FFFFFF\">                 </span><span style=\"color: #D4D4D4\">\"lat\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">50</span><span style=\"color: #FFFFFF\">, </span>\n<span style=\"color: #FFFFFF\">                 </span><span style=\"color: #D4D4D4\">\"lon\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">-30</span>\n<span style=\"color: #FFFFFF\">               },</span>\n<span style=\"color: #FFFFFF\">               </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #B5CEA8\">130.00</span>\n\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<h3 id=\"scenariusze-z-Å¼ycia-wziÄ™te\">Scenariusze z Å¼ycia wziÄ™te:</h3>\n<h4 id=\"uÅ¼ytkownik-wyszukuje-peÅ‚notekstowo-po-tytule-oferty\">UÅ¼ytkownik wyszukuje peÅ‚notekstowo po tytule oferty:</h4>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">GET offers/_search</span>\n<span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"query\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"match\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\">: </span><span style=\"color: #CE9178\">\"skarpetki\"</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">  }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<p>OdpowiedÅº z serwera, widzimy znaleziony rekord, poniewaÅ¼ w tytule zawarte jest sÅ‚owo \"skarpetki\":</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"took\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"timed_out\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #569CD6\">false</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"_shards\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"total\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"successful\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"skipped\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"failed\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span>\n<span style=\"color: #FFFFFF\">  },</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"hits\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"total\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"value\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"relation\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"eq\"</span>\n<span style=\"color: #FFFFFF\">    },</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"max_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0.7389809</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"hits\"</span><span style=\"color: #FFFFFF\"> : [</span>\n<span style=\"color: #FFFFFF\">      {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_index\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"offers\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_type\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"_doc\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_id\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"QiyNanQB6SAY5Ir04SbI\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0.7389809</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_source\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"skarpety rozmiar 36\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"kolorowe skarpetki w kropki\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lat\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">40</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lon\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">-70</span>\n<span style=\"color: #FFFFFF\">          },</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">10.0</span>\n<span style=\"color: #FFFFFF\">        }</span>\n<span style=\"color: #FFFFFF\">      }</span>\n<span style=\"color: #FFFFFF\">    ]</span>\n<span style=\"color: #FFFFFF\">  }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<h4 id=\"uÅ¼ytkownik-w-filtrach-wybiera-zakres-cenowy\">UÅ¼ytkownik w filtrach wybiera zakres cenowy</h4>\n<p>Ustalamy:</p>\n<ul>\n<li>gte (greater than or equal) - wiÄ™ksze lub rÃ³wne 10, </li>\n<li>lte (lower than or equal) - mniejsze lub rÃ³wne 20</li>\n</ul>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">GET offers/_search</span>\n<span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"query\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"range\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">                </span><span style=\"color: #D4D4D4\">\"gte\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">10</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">                </span><span style=\"color: #D4D4D4\">\"lte\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">20</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">                </span><span style=\"color: #D4D4D4\">\"boost\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">2.0</span>\n<span style=\"color: #FFFFFF\">            }</span>\n<span style=\"color: #FFFFFF\">        }</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<p>Znalezione 2 oferty, z cenÄ… wiÄ™kszÄ… niÅ¼ 10 ale mniejszÄ… niÅ¼ 20.</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"took\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"timed_out\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #569CD6\">false</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"_shards\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"total\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"successful\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"skipped\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"failed\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span>\n<span style=\"color: #FFFFFF\">  },</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"hits\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"total\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"value\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">2</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"relation\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"eq\"</span>\n<span style=\"color: #FFFFFF\">    },</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"max_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">2.0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"hits\"</span><span style=\"color: #FFFFFF\"> : [</span>\n<span style=\"color: #FFFFFF\">      {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_index\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"offers\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_type\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"_doc\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_id\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"QiyNanQB6SAY5Ir04SbI\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">2.0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_source\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"skarpety rozmiar 36\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"kolorowe skarpetki w kropki\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lat\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">40</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lon\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">-70</span>\n<span style=\"color: #FFFFFF\">          },</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">10.0</span>\n<span style=\"color: #FFFFFF\">        }</span>\n<span style=\"color: #FFFFFF\">      },</span>\n<span style=\"color: #FFFFFF\">      {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_index\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"offers\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_type\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"_doc\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_id\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"RCyNanQB6SAY5Ir07CYY\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">2.0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_source\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"szelki\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"szelki w kolorze czarnym, rozmiar XS\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lat\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">50</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lon\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">-40</span>\n<span style=\"color: #FFFFFF\">          },</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">14.0</span>\n<span style=\"color: #FFFFFF\">        }</span>\n<span style=\"color: #FFFFFF\">      }</span>\n<span style=\"color: #FFFFFF\">    ]</span>\n<span style=\"color: #FFFFFF\">  }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<h4 id=\"szukanie-po-lokalizacji\">Szukanie po lokalizacji:</h4>\n<p>Chcemy znaleÅºÄ‡ oferty w promieniu 100km od miejscowoÅ›ci o wspÃ³Å‚rzÄ™dnych [-70.001, 40.002]</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">GET offers/_search</span>\n<span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"query\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"bool\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"must\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">                </span><span style=\"color: #D4D4D4\">\"match_all\"</span><span style=\"color: #FFFFFF\"> : {}</span>\n<span style=\"color: #FFFFFF\">            },</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"filter\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">                </span><span style=\"color: #D4D4D4\">\"geo_distance\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">                    </span><span style=\"color: #D4D4D4\">\"distance\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"100km\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">                    </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\"> : [</span><span style=\"color: #B5CEA8\">-70.001</span><span style=\"color: #FFFFFF\">, </span><span style=\"color: #B5CEA8\">40.002</span><span style=\"color: #FFFFFF\">]</span>\n<span style=\"color: #FFFFFF\">                }</span>\n<span style=\"color: #FFFFFF\">            }</span>\n<span style=\"color: #FFFFFF\">        }</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<p>OdpowiedÅº z serwera:</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"took\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"timed_out\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #569CD6\">false</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"_shards\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"total\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"successful\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"skipped\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"failed\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span>\n<span style=\"color: #FFFFFF\">  },</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"hits\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"total\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"value\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"relation\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"eq\"</span>\n<span style=\"color: #FFFFFF\">    },</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"max_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1.0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"hits\"</span><span style=\"color: #FFFFFF\"> : [</span>\n<span style=\"color: #FFFFFF\">      {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_index\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"offers\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_type\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"_doc\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_id\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"-SyVanQB6SAY5Ir0BSZs\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1.0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_source\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"skarpety rozmiar 36\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"kolorowe skarpetki w kropki\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lat\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">40</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lon\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">-70</span>\n<span style=\"color: #FFFFFF\">          },</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">10.0</span>\n<span style=\"color: #FFFFFF\">        }</span>\n<span style=\"color: #FFFFFF\">      }</span>\n<span style=\"color: #FFFFFF\">    ]</span>\n<span style=\"color: #FFFFFF\">  }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<p>ZnalazÅ‚o 1 rekord o wspÃ³Å‚rzÄ™dnych [-70, 40].</p>\n<h4 id=\"wyszukiwanie-rÃ³wnieÅ¼-w-opisie\">Wyszukiwanie rÃ³wnieÅ¼ w opisie</h4>\n<p>Mamy 1 rekord, ktÃ³ry w tytule ma \"skarpety\" a w opisie \"skarpetki\". Chcemy go wyszukaÄ‡ po opisie. OgÃ³lnie da siÄ™ skonfigurowaÄ‡, Å¼eby wyszukiwaÅ‚o pochodne sÅ‚owa od skarpety, ale to moÅ¼e w innym poÅ›cie :)</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">GET offers/_search</span>\n<span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"query\"</span><span style=\"color: #FFFFFF\">: {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"multi_match\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"query\"</span><span style=\"color: #FFFFFF\">:    </span><span style=\"color: #CE9178\">\"skarpetki\"</span><span style=\"color: #FFFFFF\">, </span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"fields\"</span><span style=\"color: #FFFFFF\">: [ </span><span style=\"color: #CE9178\">\"title\"</span><span style=\"color: #FFFFFF\">, </span><span style=\"color: #CE9178\">\"description\"</span><span style=\"color: #FFFFFF\"> ] </span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">  }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<p>No i mamy znalezione skarpetki.</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #FFFFFF\">{</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"took\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"timed_out\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #569CD6\">false</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"_shards\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"total\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"successful\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"skipped\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"failed\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0</span>\n<span style=\"color: #FFFFFF\">  },</span>\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #D4D4D4\">\"hits\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"total\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"value\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">1</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #D4D4D4\">\"relation\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"eq\"</span>\n<span style=\"color: #FFFFFF\">    },</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"max_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0.9808291</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">\"hits\"</span><span style=\"color: #FFFFFF\"> : [</span>\n<span style=\"color: #FFFFFF\">      {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_index\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"offers\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_type\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"_doc\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_id\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"-SyVanQB6SAY5Ir0BSZs\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_score\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">0.9808291</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #D4D4D4\">\"_source\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"title\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"skarpety rozmiar 36\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"description\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #CE9178\">\"kolorowe skarpetki w kropki\"</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"location\"</span><span style=\"color: #FFFFFF\"> : {</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lat\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">40</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">            </span><span style=\"color: #D4D4D4\">\"lon\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">-70</span>\n<span style=\"color: #FFFFFF\">          },</span>\n<span style=\"color: #FFFFFF\">          </span><span style=\"color: #D4D4D4\">\"price\"</span><span style=\"color: #FFFFFF\"> : </span><span style=\"color: #B5CEA8\">10.0</span>\n<span style=\"color: #FFFFFF\">        }</span>\n<span style=\"color: #FFFFFF\">      }</span>\n<span style=\"color: #FFFFFF\">    ]</span>\n<span style=\"color: #FFFFFF\">  }</span>\n<span style=\"color: #FFFFFF\">}</span></code></pre>\n<p>To tyle na dziÅ›. Jako czytelnik rÃ³Å¼nych blogÃ³w lubiÄ™, gdy jest duÅ¼o przykÅ‚adÃ³w, wiÄ™c teÅ¼ w takiej formie postanowiÅ‚am stworzyÄ‡ wpis. BÄ™dÄ™ testowaÄ‡, czy przyjemniej mi siÄ™ tak pisze.</p>\n","excerpt":"Elasticsearch to zaawansowany silnik wyszukiwaÅ„ a jednoczeÅ›nie baza danych pozwalajÄ…ca na przechowywanie rÃ³Å¼nych typÃ³w danych. Wykorzystywana jest gÅ‚Ã³wnie przy komercyjnych wyszukiwarkach oraz przy","description":"Elasticsearch to zaawansowany silnik wyszukiwaÅ„ a jednoczeÅ›nie baza danych pozwalajÄ…ca na przechowywanie rÃ³Å¼nych typÃ³w danych. Wykorzystywana jest gÅ‚Ã³wnie przy komercyjnych wyszukiwarkach oraz przy gromadzeniu logÃ³w systemowych. DziÄ™ki Elasticsearch, moÅ¼esz wykonywaÄ‡ skomplikowane wyszukiwania, filtry i agregacje, a takÅ¼e wykorzystywaÄ‡ sÅ‚owniki.","path":"/elasticsearch-to-nie-tylko-logi/","cover":"/images/posts/elasticsearch-zapytania/searching.jpg","tags":[{"id":"elk","title":"elk","path":"/tag/elk/"},{"id":"elasticsearch","title":"elasticsearch","path":"/tag/elasticsearch/"},{"id":"inÅ¼ynieria","title":"inÅ¼ynieria","path":"/tag/in%C5%BCynieria/"},{"id":"database","title":"database","path":"/tag/database/"}],"author":{"id":"Julia Glaszka","title":"Julia Glaszka"}}},{"node":{"id":"888e79f6459f76d95ede4741ee5f58ca","title":"Prawo Demeter - zasada ograniczenia interakcji","timeToRead":2,"datetime":"2020-04-30 15:56:24","content":"<p>Przy projektowaniu obiektowym moÅ¼emy siÄ™ zastanowiÄ‡, w jaki sposÃ³b uproÅ›ciÄ‡ relacje miÄ™dzy naszymi obiektami, tak aby zmiana w jednej klasie nie propagowaÅ‚a koniecznoÅ›ci zmian w wielu innych.\nZ pomocÄ… przychodzi nam <a href=\"https://pl.wikipedia.org/wiki/Prawo_Demeter\" title=\"**prawo Demeter** \" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>prawo Demeter,</strong> </a>, ktÃ³re w skrÃ³cie ogranicza nas do interakcji jedynie z najbliÅ¼szymi sÄ…siednimi obiektami. DziÄ™ki temu, nasz obiekt jest zaleÅ¼ny tylko od swoich sÄ…siadÃ³w. Kiedy implementacja sÄ…siada naszego sÄ…siada siÄ™ zmieni - nie interesuje nas to. Jest to tak zwany luÅºny zwiÄ…zek (<em>ang. loose coupling</em>).\nNie Å‚amiemy w ten sposÃ³b zasady enkapsulacji obiektu i nie tworzymy duÅ¼ej iloÅ›ci powodÃ³w, dla ktÃ³rych mielibyÅ›my modyfikowaÄ‡ naszÄ… klasÄ™. W ten sposÃ³b moÅ¼emy sprawiÄ‡, Å¼e nasz projekt jest zgodny z zasadami <a href=\"https://pl.wikipedia.org/wiki/SOLID_(programowanie_obiektowe)\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">SOLID</a>.\nPoniÅ¼ej, na przykÅ‚adzie logiki aplikacji quizowej, moÅ¼emy przeanalizowaÄ‡ przypadek <strong>tight coupled</strong> (1) i<strong> loose coupled</strong> (2). </p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #7CA668\">//// przykÅ‚ad tight coupling (1)</span>\n<span style=\"color: #569CD6\">class</span><span style=\"color: #FFFFFF\"> QuizWhichBreaksLawOfDemeter {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">private</span><span style=\"color: #FFFFFF\"> questions</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> Question[]</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #7CA668\">// ...</span>\n<span style=\"color: #FFFFFF\">    isAnswerCorrect(question</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> Question) {</span>\n<span style=\"color: #FFFFFF\">     </span><span style=\"color: #7CA668\">// poniÅ¼ej Å‚amiemy Prawo Demeter</span>\n<span style=\"color: #FFFFFF\">     </span><span style=\"color: #7CA668\">// wnikajÄ…c w implementacjÄ™ answer</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #569CD6\">return</span><span style=\"color: #FFFFFF\"> question.getAnswer().getId() </span><span style=\"color: #D4D4D4\">==</span><span style=\"color: #FFFFFF\"> </span>\n<span style=\"color: #FFFFFF\">      question.getUserAnswer().getId()</span>\n<span style=\"color: #FFFFFF\">    } </span>\n<span style=\"color: #FFFFFF\">  </span>\n<span style=\"color: #FFFFFF\">    countCorrectAnswers()</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> number {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #569CD6\">return</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">this</span><span style=\"color: #FFFFFF\">.questions</span>\n<span style=\"color: #FFFFFF\">        .filter(q </span><span style=\"color: #569CD6\">=&gt;</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">this</span><span style=\"color: #FFFFFF\">.isAnswerCorrect(q))</span>\n<span style=\"color: #FFFFFF\">        .length</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">  } </span>\n\n<span style=\"color: #7CA668\">// anemiczna klasa question, nic prÃ³cz getterÃ³w i setterÃ³w</span>\n<span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">class</span><span style=\"color: #FFFFFF\"> Question {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">private</span><span style=\"color: #FFFFFF\"> answer</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> QuizOption</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">private</span><span style=\"color: #FFFFFF\"> userAnswer</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> QuizOption</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #7CA668\">// ...</span>\n<span style=\"color: #FFFFFF\">    getUserAnswer()</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> QuizOption {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #569CD6\">return</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">this</span><span style=\"color: #FFFFFF\">.userAnswer</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">    getAnswer()</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> QuizOption {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #569CD6\">return</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">this</span><span style=\"color: #FFFFFF\">.answer</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">  } </span></code></pre>\n<p>W powyÅ¼szym przykÅ‚adzie z poziomu quizu dostajemy siÄ™ do wnÄ™trza answer, ktÃ³ry nie jest naszym bezpoÅ›rednim sÄ…siadem (quiz &#x3C;-> question &#x3C;-> answer). Metoda <code>isAnswerCorrect()</code> wywoÅ‚uje Å‚aÅ„cuch <code>question.getUserAnswer().getId()</code>, dostajÄ…c siÄ™ gÅ‚Ä™boko do struktury, ktÃ³rej szczegÃ³Å‚Ã³w implementacyjnych nie powinniÅ›my znaÄ‡. Åamiemy Prawo Demeter. </p>\n<p>ZastanÃ³wmy siÄ™, jak moÅ¼emy rozwiÄ…zaÄ‡ ten problem. Musimy ograniczyÄ‡ splÄ…tanie naszych klas i ich wspÃ³lnÄ… zaleÅ¼noÅ›Ä‡ od siebie.\nPoniÅ¼ej przykÅ‚ad, ktÃ³ry jest nieco lepszy. Metoda <code>isAnswerCorrect()</code> zostaÅ‚a przeniesiona z klasy Quiz, do klasy Question. Manipuluje ona juÅ¼ swoimi wÅ‚asnymi sÄ…siadami, wystawiajÄ…c Quizowi tylko metodÄ™ do sprawdzenia ( <code>isAnswerCorrect()</code> ).</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #7CA668\">// przykÅ‚ad loose coupling (2)</span>\n<span style=\"color: #569CD6\">class</span><span style=\"color: #FFFFFF\"> QuizLooseCoupled {</span>\n<span style=\"color: #FFFFFF\">    questions</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> Question[]</span>\n<span style=\"color: #FFFFFF\">\t</span><span style=\"color: #7CA668\">// nie interesuje nas jak jest sprawdzana odpowiedÅº</span>\n<span style=\"color: #FFFFFF\">\t</span><span style=\"color: #7CA668\">// po prostu wywoÅ‚ujemy metodÄ™ naszego sÄ…siedniego obiektu</span>\n<span style=\"color: #FFFFFF\">     countCorrectAnswers()</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> number {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #569CD6\">return</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">this</span><span style=\"color: #FFFFFF\">.questions</span>\n<span style=\"color: #FFFFFF\">        .filter(q </span><span style=\"color: #569CD6\">=&gt;</span><span style=\"color: #FFFFFF\"> q.isAnswerCorrect())</span>\n<span style=\"color: #FFFFFF\">        .length</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">  }</span>\n\n<span style=\"color: #FFFFFF\">  </span><span style=\"color: #569CD6\">class</span><span style=\"color: #FFFFFF\"> Question {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #7CA668\">// ...</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">private</span><span style=\"color: #FFFFFF\"> answer</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> QuizOption</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">private</span><span style=\"color: #FFFFFF\"> userAnswer</span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> QuizOption</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #7CA668\">// tutaj przeniesiona jest odpowiedzialnoÅ›Ä‡ funkcji</span>\n<span style=\"color: #FFFFFF\">    isAnswerCorrect() {</span>\n<span style=\"color: #FFFFFF\">      </span><span style=\"color: #569CD6\">return</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">this</span><span style=\"color: #FFFFFF\">.answer.getId() </span><span style=\"color: #D4D4D4\">===</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">this</span><span style=\"color: #FFFFFF\">.userAnswer.getId()</span>\n<span style=\"color: #FFFFFF\">    } </span>\n<span style=\"color: #FFFFFF\">  } </span></code></pre>\n<p>Podany przykÅ‚ad jest prosty. PopeÅ‚nienie bÅ‚Ä™du z pierwszej sekcji nie jest fatalne w skutkach, refaktoryzacja zajmie pÃ³Å‚ minuty. W przypadku wiÄ™kszych aplikacji z wieloma tight coupled obiektami moÅ¼e powstaÄ‡ problem, ktÃ³ry poskutkuje efektem domina - naprawiajÄ…c jeden obiekt, musimy naprawiÄ‡ 2,3,4 nastÄ™pnychâ€¦</p>\n<p>Na ile posiadamy czasu, warto zastanowiÄ‡ siÄ™ nad rozluznieniem wiezi naszych obiektÃ³w pÃ³ki nie ma dramatu - nie Å¼yjemy w staroÅ¼ytnej Grecji, ale Prawo Demeter warto znaÄ‡ :) </p>\n<p>CaÅ‚oÅ›Ä‡ kodu moÅ¼na znaleÅºÄ‡ na moim <a href=\"https://github.com/julia-glaszka/law-of-demeter\" title=\"githubie\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">githubie</a>.</p>\n","excerpt":"Przy projektowaniu obiektowym moÅ¼emy siÄ™ zastanowiÄ‡, w jaki sposÃ³b uproÅ›ciÄ‡ relacje miÄ™dzy naszymi obiektami, tak aby zmiana w jednej klasie nie propagowaÅ‚a koniecznoÅ›ci zmian w wielu innych. Z","description":"Jak projektowaÄ‡ architekturÄ™ swojego kodu, aby uniknÄ…Ä‡ spaghetti code? Co to jest loose coupling i jak jest zwiÄ…zany z prawem Demeter? Na przykÅ‚adzie prostego kodu pokaÅ¼Ä™, jak moÅ¼na to prosto osiÄ…gnÄ…Ä‡.","path":"/prawo-demeter-zasada-ograniczenia-interakcji/","cover":"/images/posts/prawo-demeter/cover.jpg","tags":[{"id":"clean code","title":"clean code","path":"/tag/clean%20code/"},{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"TypeScript","title":"TypeScript","path":"/tag/TypeScript/"},{"id":"inÅ¼ynieria","title":"inÅ¼ynieria","path":"/tag/in%C5%BCynieria/"}],"author":{"id":"Julia Glaszka","title":"Julia Glaszka"}}},{"node":{"id":"e8c9d1ee5f11bad9b7871e8cff0f2f63","title":"Wykonywanie kopii obiektÃ³w w javascript","timeToRead":4,"datetime":"2020-03-01 14:43:24","content":"<p><strong>Kopiowanie</strong> to mechanizm tworzenia <strong>duplikatÃ³w</strong>. W przypadku <strong>prymitywÃ³w</strong> (string, number, boolean itd) sprawa jest prosta, moÅ¼emy spokojnie wykonywaÄ‡ wszystkie operacje bez obaw o nadpisywanie oryginaÅ‚u. </p>\n<p>Sprawa siÄ™ komplikuje przy zastosowaniu przypisania obiektu za pomocÄ… prostego = - wtedy tworzy siÄ™ <strong>referencja</strong> do oryginaÅ‚u. Kopia jest zaleÅ¼na od oryginaÅ‚u, wiÄ™c kaÅ¼da modyfikacja w obiekcie oddziaÅ‚uje na resztÄ™ obiektÃ³w. Czasami taki efekt nie jest poÅ¼Ä…dany, niestety w js brakuje natywnych, prostych sposobÃ³w na klonowanie obiektÃ³w bez tworzenia referencji (wskaÅºnika na oryginaÅ‚), trzeba w tym celu wykorzystywaÄ‡ rÃ³Å¼ne hacki. </p>\n<p>W tym artykule omÃ³wiÄ™ czÄ™Å›Ä‡ z nich, mam nadziejÄ™ Å¼e komuÅ› siÄ™ przydadzÄ….</p>\n<h2 id=\"trochÄ™-teorii\">TrochÄ™ teorii</h2>\n<p>IstniejÄ… rodzaje kopiowania obiektÃ³w w js:</p>\n<ul>\n<li><strong>Brak</strong> - <strong>referencja</strong>, wskazuje na adres obiektu macierzystego. Przy podmianie jakiejkolwiek wartoÅ›ci obiektu, zamieniajÄ… siÄ™ one rÃ³wnoczeÅ›nie w kopii i oryginale. Kopia jest <strong>silnie zaleÅ¼na</strong> od oryginaÅ‚u.</li>\n<li><strong>PÅ‚ytkie (shallow)</strong> - otrzymujemy prostÄ… kopiÄ™, ktÃ³ra posiada <strong>jednopoziomowÄ… kopiÄ™</strong>, gÅ‚Ä™bsze zagnieÅ¼dzenia sÄ… <strong>referencjÄ… do oryginaÅ‚u</strong> i przy podmianie wartoÅ›ci zmieni siÄ™ rÃ³wnieÅ¼ w innych obiektach.</li>\n<li><strong>GÅ‚Ä™bokie (deep)</strong> - kopie sÄ… <strong>identyczne</strong> i <strong>niezaleÅ¼ne</strong> od siebie. Obiekt jest <strong>autonomiczny</strong>, posiada wartoÅ›ci na wÅ‚asnoÅ›Ä‡, <strong>nic nie wspÃ³Å‚dzieli</strong> - zmiana w oryginale nie zmodyfikuje kopii.</li>\n</ul>\n<h2 id=\"brak-kopii\">Brak kopii</h2>\n<p>Zacznijmy od tego, w jaki sposÃ³b nie skopiujemy obiektu, a ktÃ³ry jednak poczÄ…tkowo wydaje siÄ™ sÅ‚usznym i prostym rozwiÄ…zaniem. Jak widaÄ‡, przy podmianie wartoÅ›ci w klonie, wartoÅ›Ä‡ oryginaÅ‚u rÃ³wnieÅ¼ siÄ™ zmieniÅ‚a, co nie jest oczekiwanym efektem.</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #7CA668\">// proste przypisanie  </span>\n<span style=\"color: #569CD6\">var</span><span style=\"color: #FFFFFF\"> strawberry </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> {</span>\n<span style=\"color: #FFFFFF\">    color: </span><span style=\"color: #CE9178\">'red'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    taste: </span><span style=\"color: #CE9178\">'sweet'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    size: </span><span style=\"color: #CE9178\">'large'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    shape: {</span>\n<span style=\"color: #FFFFFF\">        x: </span><span style=\"color: #B5CEA8\">10</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        y: </span><span style=\"color: #B5CEA8\">32</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        z: </span><span style=\"color: #B5CEA8\">33</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">};</span>\n\n<span style=\"color: #569CD6\">var</span><span style=\"color: #FFFFFF\"> someOtherStrawberry </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> strawberry;</span>\n<span style=\"color: #FFFFFF\">someOtherStrawberry.size </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #CE9178\">'small'</span>\n<span style=\"color: #FFFFFF\">console.log(strawberry.size); </span>\n<span style=\"color: #7CA668\">// output: small</span></code></pre>\n<h2 id=\"pÅ‚ytkie-kopie\">PÅ‚ytkie kopie</h2>\n<p>CzÄ™Å›Ä‡ funkcji dostarczonych <strong>natywnie</strong> przez JavaScript umoÅ¼liwia <strong>pÅ‚ytkie skopiowanie</strong> obiektu. DopÃ³ki zajmujemy siÄ™ przestrzeniÄ… bez zagnieÅ¼dÅ¼eÅ„, wszystko dziaÅ‚a jak powinno. </p>\n<p><strong>Problem</strong> pojawia siÄ™, gdy <strong>modyfikujemy zagnieÅ¼dÅ¼one obiekty</strong> - wtedy nadal moÅ¼emy <strong>modyfikowaÄ‡ oryginaÅ‚</strong>, co nie jest poÅ¼Ä…dane (dziÄ™ki rekurencyjnemu uÅ¼yciu pÅ‚ytkich kopii moÅ¼emy jednak stworzyÄ‡ gÅ‚Ä™bokÄ… kopiÄ™, czym zajmiemy siÄ™ pÃ³Åºniej). </p>\n<p>PoniÅ¼ej sposÃ³b na pÅ‚ytkÄ… kopiÄ™: </p>\n<h3 id=\"objectassign\">Object.assign()</h3>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #7CA668\">//Tworzy pÅ‚ytkÄ… kopiÄ™ - klonuje wÅ‚aÅ›ciwoÅ›ci najwyÅ¼szego poziomu, pozostawiajÄ…c referencjÄ™ do zagnieÅ¼dzonych  </span>\n<span style=\"color: #569CD6\">var</span><span style=\"color: #FFFFFF\"> someOtherStrawberry </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> Object.assign({}, strawberry);  </span>\n<span style=\"color: #FFFFFF\">someOtherStrawberry.size </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #CE9178\">'small'</span><span style=\"color: #FFFFFF\">;  </span>\n<span style=\"color: #FFFFFF\">console.log(strawberry.size) </span>\n<span style=\"color: #7CA668\">// output: large  </span>\n\n<span style=\"color: #FFFFFF\">someOtherStrawberry.shape.x </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #B5CEA8\">32</span><span style=\"color: #FFFFFF\">  </span>\n<span style=\"color: #FFFFFF\">console.log(strawberry.shape.x) </span>\n<span style=\"color: #7CA668\">// output: 32, wartoÅ›Ä‡ strawberry jest podmieniona przez modyfikacje na someOtherStrawberry!</span></code></pre>\n<h3 id=\"spread-operator-es6\">Spread operator ES6</h3>\n<p>Standard ES6 przynosi nam proste uÅ‚atwienia, pozwalajÄ…ce na dokonywanie kopii. Jednym z nich jest <strong>spread operator</strong> <code>...</code>, ktÃ³ry <strong>pÅ‚ytko ignoruje</strong> wskaÅºnik do obiektu <strong>macierzystego</strong>. DziÄ™ki temu otrzymujemy obiekty niezaleÅ¼ne.</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">var</span><span style=\"color: #FFFFFF\"> strawberry </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> {</span>\n<span style=\"color: #FFFFFF\">    color: </span><span style=\"color: #CE9178\">'red'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    taste: </span><span style=\"color: #CE9178\">'sweet'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    size: </span><span style=\"color: #CE9178\">'large'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    shape: {</span>\n<span style=\"color: #FFFFFF\">        x: </span><span style=\"color: #B5CEA8\">10</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        y: </span><span style=\"color: #B5CEA8\">32</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        z: </span><span style=\"color: #B5CEA8\">33</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">};</span>\n<span style=\"color: #569CD6\">const</span><span style=\"color: #FFFFFF\"> someOtherStrawberry </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #D4D4D4\">...</span><span style=\"color: #FFFFFF\">strawberry</span>\n<span style=\"color: #FFFFFF\">};</span>\n<span style=\"color: #FFFFFF\">someOtherStrawberry.size </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #CE9178\">'small'</span><span style=\"color: #FFFFFF\">;</span>\n<span style=\"color: #FFFFFF\">console.log(strawberry.size) </span>\n<span style=\"color: #7CA668\">// output: large, wszystko OK!  </span>\n\n<span style=\"color: #FFFFFF\">someOtherStrawberry.shape.x </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #B5CEA8\">32</span><span style=\"color: #FFFFFF\">;</span>\n<span style=\"color: #FFFFFF\">console.log(strawberry.shape.x) </span>\n<span style=\"color: #7CA668\">// output: 32, znowu podmienione przez modyfikacje na someOtherStrawberry :(</span></code></pre>\n<h2 id=\"sposoby-na-gÅ‚Ä™bokÄ…-kopiÄ™\">Sposoby na gÅ‚Ä™bokÄ… kopiÄ™</h2>\n<h3 id=\"jsonparse-jsonstringify\">JSON.parse(), JSON.stringify()</h3>\n<p>Kiedy tworzymy klona, chcielibyÅ›my by byÅ‚ caÅ‚kowicie <strong>niezaleÅ¼ny referencyjnie</strong> od oryginaÅ‚u, a jednoczeÅ›nie byÅ‚ identyczny jak on. Åatwo moÅ¼na to uzyskaÄ‡ za pomocÄ… niezbyt eleganckiej sztuczki z JSONem. Metoda ta dziaÅ‚a tylko z <strong>strukturami danych</strong> - obiekt w tym wypadku nie moÅ¼e zawieraÄ‡ funkcji. </p>\n<p>OsobiÅ›cie <strong>nie stosowaÅ‚abym</strong> tego sposobu - w przypadku gdy przy wstÄ™pnych zaÅ‚oÅ¼eniach obiekt jest zwykÅ‚Ä… strukturÄ… danych, a pÃ³Åºniej nieÅ›wiadomy inny programista dopisze do niego metody, pojawi siÄ™ nieoczekiwany i problematyczny bug.</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">var</span><span style=\"color: #FFFFFF\"> strawberry </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> {</span>\n<span style=\"color: #FFFFFF\">    color: </span><span style=\"color: #CE9178\">'red'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    taste: </span><span style=\"color: #CE9178\">'sweet'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    size: </span><span style=\"color: #CE9178\">'large'</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">    shape: {</span>\n<span style=\"color: #FFFFFF\">        x: </span><span style=\"color: #B5CEA8\">10</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        y: </span><span style=\"color: #B5CEA8\">32</span><span style=\"color: #FFFFFF\">,</span>\n<span style=\"color: #FFFFFF\">        z: </span><span style=\"color: #B5CEA8\">33</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">};</span>\n<span style=\"color: #569CD6\">const</span><span style=\"color: #FFFFFF\"> someOtherStrawberry </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> JSON.parse(JSON.stringify(strawberry));</span>\n<span style=\"color: #FFFFFF\">someOtherStrawberry.size </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #CE9178\">'small'</span><span style=\"color: #FFFFFF\">;</span>\n<span style=\"color: #FFFFFF\">console.log(strawberry.size) </span>\n<span style=\"color: #7CA668\">// output: large, wszystko OK!  </span>\n\n<span style=\"color: #FFFFFF\">someOtherStrawberry.shape.x </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #B5CEA8\">32</span><span style=\"color: #FFFFFF\">;</span>\n<span style=\"color: #FFFFFF\">console.log(strawberry.shape.x) </span>\n<span style=\"color: #7CA668\">// output: 10, wszystko OK!</span></code></pre>\n<h3 id=\"customowa-funkcja-do-gÅ‚Ä™bokiego-kopiowania\">Customowa funkcja do gÅ‚Ä™bokiego kopiowania</h3>\n<p>Posiadamy juÅ¼ narzÄ™dzia do tworzenia pÅ‚ytkich kopii, moÅ¼emy wiÄ™c je wykorzystaÄ‡ przy tworzeniu gÅ‚Ä™bokich kopii, wystarczy <strong>rekurencyjnie</strong> przejÅ›Ä‡ po wszystkich <strong>wÄ™zÅ‚ach</strong>. </p>\n<p>Algorytm sprawdza czy przekazana w argumencie wartoÅ›Ä‡ - jeÅ›li jest <strong>prymitywem</strong>, po prostu zwraca go. W przypadku, gdy argument jest <strong>obiektem</strong>, przechodzimy po <strong>kaÅ¼dym</strong> jego <strong>polu</strong> i sprawdzamy czy jest ono typem <strong>prymitywnym</strong>, jeÅ›li nie - wywoÅ‚ujemy funkcjÄ™ \"rozbijajÄ…cÄ…\" dla pola nie-prymitywnego .</p>\n<p>Wszystko siÄ™ powtarza do momentu, gdy algorytm przejdzie po caÅ‚ym <strong>drzewie</strong>.</p>\n<pre class=\"shiki\" style=\"background-color: #000000\"><code><span style=\"color: #569CD6\">const</span><span style=\"color: #FFFFFF\"> deepCopyFunc </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> child </span><span style=\"color: #569CD6\">=&gt;</span><span style=\"color: #FFFFFF\"> {</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">let</span><span style=\"color: #FFFFFF\"> parent, value, key</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">if</span><span style=\"color: #FFFFFF\"> (</span><span style=\"color: #569CD6\">typeof</span><span style=\"color: #FFFFFF\"> child </span><span style=\"color: #D4D4D4\">!==</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #CE9178\">\"object\"</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #D4D4D4\">||</span><span style=\"color: #FFFFFF\"> child </span><span style=\"color: #D4D4D4\">===</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">null</span><span style=\"color: #FFFFFF\">) {</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #569CD6\">return</span><span style=\"color: #FFFFFF\"> child </span><span style=\"color: #7CA668\">// zwracamy jeÅ›li jest typem prymitywnym  </span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">    parent </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> Array.isArray(child) </span><span style=\"color: #D4D4D4\">?</span><span style=\"color: #FFFFFF\"> [] </span><span style=\"color: #D4D4D4\">:</span><span style=\"color: #FFFFFF\"> {}</span>\n\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #7CA668\">//jeÅ›li jest obiektem to iterujemy po kaÅ¼dym property  </span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">for</span><span style=\"color: #FFFFFF\"> (key </span><span style=\"color: #569CD6\">in</span><span style=\"color: #FFFFFF\"> child) {</span>\n<span style=\"color: #FFFFFF\">        value </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> child[key]</span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #7CA668\">//jeÅ›li wartoÅ›Ä‡ dla key jest obiektem to wykonujemy rekurencyjnÄ… kopie  </span>\n<span style=\"color: #FFFFFF\">        </span><span style=\"color: #569CD6\">if</span><span style=\"color: #FFFFFF\"> (value </span><span style=\"color: #D4D4D4\">!==</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">null</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #D4D4D4\">&&</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #569CD6\">typeof</span><span style=\"color: #FFFFFF\"> value </span><span style=\"color: #D4D4D4\">===</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #CE9178\">\"object\"</span><span style=\"color: #FFFFFF\">) {</span>\n<span style=\"color: #FFFFFF\">            parent[key] </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> deepCopyFunc(value)</span>\n<span style=\"color: #FFFFFF\">        } </span><span style=\"color: #569CD6\">else</span><span style=\"color: #FFFFFF\"> {</span>\n<span style=\"color: #FFFFFF\">            parent[key] </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> value</span>\n<span style=\"color: #FFFFFF\">        }</span>\n<span style=\"color: #FFFFFF\">    }</span>\n<span style=\"color: #FFFFFF\">    </span><span style=\"color: #569CD6\">return</span><span style=\"color: #FFFFFF\"> parent</span>\n<span style=\"color: #FFFFFF\">}</span>\n\n<span style=\"color: #569CD6\">let</span><span style=\"color: #FFFFFF\"> originalArray </span><span style=\"color: #D4D4D4\">=</span><span style=\"color: #FFFFFF\"> [</span><span style=\"color: #B5CEA8\">37</span><span style=\"color: #FFFFFF\">, </span><span style=\"color: #B5CEA8\">3700</span><span style=\"color: #FFFFFF\">, {</span>\n<span style=\"color: #FFFFFF\">    hello: </span><span style=\"color: #CE9178\">\"world\"</span>\n<span style=\"color: #FFFFFF\">}]</span></code></pre>\n<p>MyÅ›lÄ™, Å¼e artykuÅ‚ okazaÅ‚ siÄ™ pomocny, a moje objaÅ›nienia niezbyt trudne. JeÅ›li zauwaÅ¼ysz gdzieÅ› bÅ‚Ä…d, proszÄ™, napisz do mnie. ZaleÅ¼y mi, by mÃ³j blog byÅ‚ rzetelnym ÅºrÃ³dÅ‚em informacji, wiÄ™c z chÄ™ciÄ… przyjmujÄ™ krytykÄ™.</p>\n","excerpt":"Kopiowanie to mechanizm tworzenia duplikatÃ³w. W przypadku prymitywÃ³w (string, number, boolean itd) sprawa jest prosta, moÅ¼emy spokojnie wykonywaÄ‡ wszystkie operacje bez obaw o nadpisywanie oryginaÅ‚u.","description":"W tym poÅ›cie opisujÄ™ metody klonowania obiektÃ³w w javascript - w jÄ™zyku, w ktÃ³rym ich zachowanie jest caÅ‚kiem nietypowe i nieoczekiwane.","path":"/wykonywanie-kopii-obiektow-w-javascript/","cover":"/images/posts/kopie/cover.jpg","tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"inÅ¼ynieria","title":"inÅ¼ynieria","path":"/tag/in%C5%BCynieria/"}],"author":{"id":"Julia Glaszka","title":"Julia Glaszka"}}}]}},"context":{}}